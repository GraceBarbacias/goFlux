[
  {
    "objectID": "troubleshoot.html",
    "href": "troubleshoot.html",
    "title": "Troubleshoot",
    "section": "",
    "text": "Before trying to Google your way through some incomprehensible error messages, try some of these basic fixes:\n\nHave you tried turning it off and on again? Yes, that’s right. Even R needs a little reboot once in a while. Many problems can occur especially because of conflicts between packages. To solve this issue, restart your session and load only necessary packages. To do so, click on the “Session” tab, and click “Restart R”. Then, load only required packages.\nUpdate goFlux. The package is constantly being updated with new functions or de-bugging. Make sure you have the latest version by using this script.\nUpdate other required packages. Some errors may occur due to outdated packages. When installing the package goFlux for the first time, it will ask you if you want to update the already installed dependencies. You should always choose to update these packages. If your are using RStudio, there is a chance that the program fails to install some of the packages because it is not allowed to delete the previous version. To solve this issue, manually delete the packages you want to update (click on the little x in the “Packages” tab) before re-installing them.\nUpdate R. Most packages are being updated to work with the latest version of R, and errors can occur if your software is outdated. Make sure you have the latest version of R installed.",
    "crumbs": [
      "Troubleshoot"
    ]
  },
  {
    "objectID": "troubleshoot.html#update-update-update",
    "href": "troubleshoot.html#update-update-update",
    "title": "Troubleshoot",
    "section": "",
    "text": "Before trying to Google your way through some incomprehensible error messages, try some of these basic fixes:\n\nHave you tried turning it off and on again? Yes, that’s right. Even R needs a little reboot once in a while. Many problems can occur especially because of conflicts between packages. To solve this issue, restart your session and load only necessary packages. To do so, click on the “Session” tab, and click “Restart R”. Then, load only required packages.\nUpdate goFlux. The package is constantly being updated with new functions or de-bugging. Make sure you have the latest version by using this script.\nUpdate other required packages. Some errors may occur due to outdated packages. When installing the package goFlux for the first time, it will ask you if you want to update the already installed dependencies. You should always choose to update these packages. If your are using RStudio, there is a chance that the program fails to install some of the packages because it is not allowed to delete the previous version. To solve this issue, manually delete the packages you want to update (click on the little x in the “Packages” tab) before re-installing them.\nUpdate R. Most packages are being updated to work with the latest version of R, and errors can occur if your software is outdated. Make sure you have the latest version of R installed.",
    "crumbs": [
      "Troubleshoot"
    ]
  },
  {
    "objectID": "troubleshoot.html#troubleshoot-problems-with-install_github",
    "href": "troubleshoot.html#troubleshoot-problems-with-install_github",
    "title": "Troubleshoot",
    "section": "Troubleshoot problems with install_github()",
    "text": "Troubleshoot problems with install_github()\n\nWarning: package is in use and will not be installed\nIf you get this warning while trying to install an R package from GitHub:\n\n\nWarning: package ‘goFlux’ is in use and will not be installed\n\n\nThis error means that the package is loaded. Before re-installing the package, you must first detach it:\n\ndetach(\"package:goFlux\", unload = TRUE)\n\nIf this does not solve the problem, restart your session and try again.\n\n\n\nError: API rate limit exceeded\nIf you get this error while trying to install an R package from GitHub:\n\nmessage(\"Error: Failed to install 'goFlux' from GitHub:\n  HTTP error 403.\n  API rate limit exceeded for xxx.xxx.xxx.x (But here's the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.)\n\n  Rate limit remaining: 0/60\n  Rate limit reset at: 2023-10-16 09:08:07 UTC\n\n  To increase your GitHub API rate limit\n  - Use `usethis::create_github_token()` to create a Personal Access Token.\n  - Use `usethis::edit_r_environ()` and add the token as `GITHUB_PAT`.\")\n\nThis error can occur when a user tries to install R packages too many times in the same day. To avoid this error, only update the package when necessary. To increase your API rate limit, follow the steps below.\n\nStep 1: Set up a GitHub account\nGo to https://github.com/join .\n\nType a user name, your email address, and a password.\nChoose Sign up for GitHub, and then follow the instructions.\n\n\n\nStep 2: Create a GitHub token\nRun in R:\n\nusethis::create_github_token()\n\nOn pop-up website, generate and copy your token.\n\n\nStep 3: Set your GitHub PAT from R\nRun in R with your own token generated in step 2:\n\ncredentials::set_github_pat(\"YourTokeninStep2\")",
    "crumbs": [
      "Troubleshoot"
    ]
  },
  {
    "objectID": "troubleshoot.html#sec-click.peak",
    "href": "troubleshoot.html#sec-click.peak",
    "title": "Troubleshoot",
    "section": "click.peak based on UniqueID",
    "text": "click.peak based on UniqueID\nHow to re-run click.peak2 on one measurement at a time and replace previous click.\nHere is an example with the UniqueID 733a_C_C from the example data provided with the package.\nFirst, we must find in which position is this UniqueID located in the list of data frames created with the function obs.win (Step 2 of the Manual Identification of Measurements workflow).\n\n# Create a data frame UniqueID.position that lists the position of each UniqueID\n# in the object ow.UGGA\nUniqueID.position &lt;- cbind.data.frame(position = seq(1, length(ow.UGGA))) \nfor (i in 1:length(ow.UGGA)){\n  UniqueID.position$UniqueID[[i]] &lt;- first(ow.UGGA[[i]]$UniqueID)}\n\n# Find the UniqueID 733a_C_C in that data frame\nfilter(UniqueID.position, UniqueID == \"733a_C_C\")\n\nThen, run a normal click.peak2 on the position found:\n\nnew.click &lt;- click.peak2(ow.UGGA, seq = 2)\n\nLoad previously saved results, replace this UniqueID, and save the modified file.\n\nload(\"RData/manID.UGGA.RData\")\n\nmanID.UGGA &lt;- manID.UGGA %&gt;% \n  # Remove the previous click\n  filter(UniqueID != \"733a_C_C\") %&gt;% \n  # Add the new click\n  rbind(new.click)\n\nsave(manID.UGGA, file = \"RData/manID.UGGA.RData\")",
    "crumbs": [
      "Troubleshoot"
    ]
  },
  {
    "objectID": "bestflux.html",
    "href": "bestflux.html",
    "title": "Automatic selection of the best flux estimate",
    "section": "",
    "text": "Following flux calculation, the user can select the best flux estimate (LM or HM) based on objective criteria, using the best.flux function:\nIn addition, the best.flux function can flag measurements that are below detection limit (MDF and p-value), out of bounds (intercept), or too short (number of observations).\nBy default, all criteria are included: criteria = c(\"MAE\", \"RMSE\", \"AICc\", \"SE\", \"g.factor\", \"kappa\", \"MDF\", \"nb.obs\", \"p-value\", \"intercept\")",
    "crumbs": [
      "best.flux"
    ]
  },
  {
    "objectID": "bestflux.html#criteria-for-flux-estimate-selection-and-flagging",
    "href": "bestflux.html#criteria-for-flux-estimate-selection-and-flagging",
    "title": "Automatic selection of the best flux estimate",
    "section": "Criteria for flux estimate selection and flagging",
    "text": "Criteria for flux estimate selection and flagging\n\nAssumed non-linearity\nAlthough linear models have predominantly been used in past NSS chamber applications, the true exchange rate is only linear at the moment of chamber deployment. Indeed, molecular diffusion theory states that chamber feedback leads to declining gradients of the relationship between concentration and time (livingston2006?; Hutchinson and Mosier 1981). The consequence of using a linear model is that the flux estimate will always underestimate the true flux (matthias1978?; jury1982?; Hüppi, Felber, Krauss, Six, Leifeld, and Fuß 2018; livingston2005?; livingston2006?; anthony1995?; hutchinson2003?).\nThe underestimation in the flux estimate when applying a linear model to inherently non-linear measurements has long been assumed negligible when measurements appear to be linear (livingston1995enclosure?; davidson2002?), however, this error is not negligible and thus pre-deployment emission rates estimated with linear models have been systematically and often substantially underestimated in nearly all NSS chamber applications (matthias1978?; jury1982?; anthony1995?; hutchinson2003?; livingston2005?).\nOne could argue that using a non-linear model is only valid if one can be sure that there is no physical disturbances caused by the chamber at the moment of deployment, e.g. pressure fluctuations (conen1998?), gas leakage (livingston2006?) or turbulence (hutchinson2015?). These artefacts may cause a pronounced concentration increase in the chamber at the beginning of the measurement, leading to an overestimation of the flux estimate (forbrich2010?). However, we argue that poor quality measurements can easily be identified and dealt with, either by modifying the window of observation or removing the measurement. In cases where measurements have an especially poor quality, the best.flux function will automatically flag these measurements for quality filtering and select the linear model as the flux best estimate.\n\n\ng.factor\nThe g.factor is the ratio between a non-linear flux estimate (e.g. Hutchinson and Mosier; HM) and a linear flux estimate (Hüppi, Felber, Krauss, Six, Leifeld, and Fuß 2018):\n\\[\\mathbf{Eqn~7}~~~~~~g.factor = \\frac{HM.flux}{LM.flux}\\]\nWith the best.flux function, one can choose a limit at which the HM model is deemed to overestimate (f0). We recommend the following thresholds for the g.factor: &lt;4 for a relaxed threshold, &lt;2 for a intermediate threshold, or &lt;1.25 for a more conservative threshold. The default threshold is g.limit = 2. If the g.factor is above the specified threshold, the best flux estimate will switch to LM instead of HM. If HM.flux/LM.flux is larger than g.limit, a warning is given in the columns HM.diagnose and quality.check.\nIn the case where the linear flux estimate is larger than the HM flux estimate, the inverse of the g.factor is used as a threshold.\n\n\n\n\n\n\nNote\n\n\n\nFor measurements where a large curvature is expected, the g.factor is most likely not a good criteria. Indeed, measurements with a large curvature (e.g. water vapor fluxes) will always have a much larger HM flux estimate than the LM flux estimate.\n\n\n\n\nMinimal Detectable Flux (MDF)\nThe minimal detectable flux (\\(MDF\\)) is based on instrument precision (\\(prec\\)) and measurement time (\\(t\\)) (christiansen2015?).\n\\[\\mathbf{Eqn~8}~~~~~~MDF = \\frac{prec}{t}~\\times~flux.term\\]\nWhere the instrument precision is in the same units as the measured gas (ppm or ppb) and the measurement time is in seconds.\nBelow the MDF, the flux estimate is considered under the detection limit, but not null. Therefore, the function will not return a 0. There will simply be a warning in the columns quality.check, LM.diagnose or HM.diagnose to warn of a flux estimate under the detectable limit. No best flux estimate is chosen based on MDF.\n\n\nKappa ratio\nThe parameter kappa determines the curvature of the non-linear regression in the Hutchinson and Mosier model, as shown in equation 1. The limit of kappa-max, as calculated in equation 2, is included in the goFlux function, so that the non-linear flux estimate cannot exceed this maximum curvature.\nIn the function best.flux, one can choose the linear flux estimate over the non-linear flux estimate based on the ratio between kappa and kappa-max (k.ratio). A value of 1 indicates HM.k = k.max, and a value of e.g. 0.5 indicates HM.k = 0.5*k.max. The default setting is k.ratio = 1. If HM.k/k.max is larger than k.ratio, a warning is issued in the columns HM.diagnose and quality.check. The ratio is expressed as a percentage of kappa-max in the plots.\n\n\nIndices of model fit\nIn the best.flux function, we included multiple choices of indices of model fit, described below. One can choose to include however many of them in the function. If multiple of them are included, the selection of the best model will be made based on a scoring system. Both models start with a score of 0. For each criteria, whichever model performs worst is given +1. After all selected criteria have been evaluated, the model with the lowest score wins. In case of a tie, the non-linear flux estimate is always chosen by default, as non-linearity is assumed. The score is printed in the output data frame in the columns HM.score and LM.score.\n\nMean Absolute Error (MAE) and Root Mean Square Error (RMSE)\nThe mean absolute error (MAE) is the arithmetic mean of the absolute residuals of a model, calculated as follows:\n\\[ \\mathbf{Eqn~9}~~~~~~MAE = \\frac{1}{n} \\sum_{i = 1}^{n}{\\lvert{y_i-\\hat{y_i}}\\rvert} \\]\nWhere \\(y_i\\) is the measured value, \\(\\hat{y_i}\\) is the predicted value and \\(n\\) is the number of observations.\nThe root mean square error (RMSE) is very similar to the MAE. Instead of using absolute errors, it uses squared errors, and the mean of the squared errors is then rooted as follows:\n\\[ \\mathbf{Eqn~10}~~~~~~RMSE = \\sqrt{\\frac{1}{n} \\sum_{i = 1}^{n}{({y_i-\\hat{y_i}})^2}} \\]\nBecause of the squared errors, RMSE is sensitive to outliers. Indeed, a few large errors will have a significant impact on the RMSE. Therefore, RMSE will always be larger than or equal to MAE (pontius2007?).\nMathematically, RMSE is equivalent to the standard deviation of the residuals. Indeed, for a constant gas concentration, the standard deviation is expressed as follows:\n\\[ \\mathbf{Eqn~11}~~~~~~\\sigma = \\sqrt{\\frac{1}{N} \\sum_{i = 1}^{N}{({x_i-\\mu})^2}} \\]\nWhere \\(x_i\\) is the measured value, \\(N\\) is the size of the population and \\(\\mu\\) is the population mean. The standard deviation is used to calculate the precision of an instrument. In that case, \\(\\mu\\) is a known constant gas concentration and \\(N\\) is the number of observations.\nConsidering all of the above, MAE, RMSE and the standard deviation are all measures of how much the data points are scattered around the true mean or the regression. Therefore, MAE and RMSE can be compared to the instrument precision to determine if a measurement is noisy. For a MAE or RMSE larger than the instrument precision, the measurement is considered to have more noise than normally expected.\nIf MAE is chosen as a criteria in best.flux, the model with the smallest MAE is chosen. If both models have a MAE smaller than the instrument precision, the non-linear flux estimate is always chosen by default, as non-linearity is assumed. When MAE is larger than the instrument precision, a warning is given in the columns quality.check, LM.diagnose or HM.diagnose to warn of a noisy measurement. RMSE functions exactly the same was as MAE in the best.flux function.\n\n\nStandard Error\nWhile the standard deviation describes how the data points are scattered around the true mean (precision), the standard error of a measurement tells how much that measurement deviates from the true population mean (accuracy) (altman2005?). If considering the standard deviation as used to calculate instrument precision (equation 11), the instrument standard error (instrument accuracy) can be defined as the standard deviation divided by the square root of the number of observations:\n\\[\\mathbf{Eqn~12}~~~~~~\\sigma_\\bar{x} = \\frac{\\sigma}{\\sqrt{n}}\\]\nPractically, this means that the accuracy increases with the sample size of a measurement. In other words, if an instrument is imprecise and the measurement has a lot of noise, it is still possible to get a more accurate estimate of the true mean by increasing the number of observations. With high-frequency GHG analyzers, that means increasing the chamber closure time.\nTo calculate the standard error of a regression, one can use the delta method (deltamethod from the msm package), which propagates the total error of the flux calculation for each parameter included in the formula. The delta method approximates the standard error of a regression \\(g(X)\\) of a random variable \\(X = (x_1, x_2, ...)\\), given estimates of the mean and covariance matrix of \\(X\\) (mandel2013?; oehlert1992?).\nIn the function best.flux, the standard error (SE) of the measurements can be compared to the standard error of the instrument (\\(\\sigma_\\bar{x}\\)). If SE is chosen as a criteria in best.flux, the model with the smallest SE is chosen. If both models have a SE smaller than the instrument precision, the non-linear flux estimate is always chosen by default, as non-linearity is assumed. When SE is larger than the instrument accuracy (\\(\\sigma_\\bar{x}\\)), a warning is given in the columns quality.check, LM.diagnose or HM.diagnose to warn of a noisy measurement.\n\n\nAkaike Information Criterion corrected for small sample size (AICc)\nThe AIC estimates the relative quality of a statistical model and is used to compare the fitting of different models to a set of data (akaike1974?). Consider the formula for AIC:\n\\[\\mathbf{Eqn~13}~~~~~~AIC = 2k - 2ln(\\hat{L})\\]\nWhere \\(k\\) is the number of parameters in the model and \\(\\hat{L}\\) is the maximized value of the likelihood function for the model. AIC deals with the trade-off between the goodness of fit of a model and the simplicity of the model. In other words, the AIC is a score that deals with both the risk of underfitting and the risk of overfitting, and the model with the lowest score has the best model fit.\nIn flux calculation, the linear model contains two parameters: the slope and the intercept (\\(C_0\\)), whereas the Hutchinson and Mosier model (equation 1) contains three parameters: the assumed concentration of constant gas source below the surface (\\(\\varphi\\)), the concentration in the chamber at the moment of chamber closure (\\(C_0\\)) and the curvature, kappa (\\(\\kappa\\)). If both models have a very similar fit (maximum likelihood), then the linear model would win because it has less parameters. However, when the sample size is small (&lt;40 observations per parameter; i.e. &lt;120 observations when calculating HM), there is an increased risk that AIC selects a model with too many parameters. To address this risk of overfitting, AICc was developed (sugiura1978?):\n\\[\\mathbf{Eqn~14}~~~~~~AICc = AIC + \\frac{2k^2 + 2k}{n - k - 1}\\]\nWhere \\(n\\) denotes the number of observations and \\(k\\) the number of parameters in the model.\nIf AICc is selected as a criteria in the best.flux function, the model with the lowest AICc wins.\n\n\n\nIntercept\nIf the initial gas concentration (C0) calculated for the flux estimates (HM.C0 and LM.C0) deviates from the true C0 (measured concentration at \\(t = 0\\)) by more or less than 10% of the difference between C0 and the final gas concentration at the end of the measurement (Ct), a warning is issued in the columns quality.check, LM.diagnose or HM.diagnose to warn of an intercept out of bounds. Alternatively, one can provide boundaries for the intercept, for example: intercept.lim = c(380, 420) for a true C0 of 400 ppm.\n\n\nStatistically significant flux (p-value)\nThis criteria is only applicable to the linear flux. Under a defined p-value, the linear flux estimate is deemed non-significant, i. e., flux under the detectable limit. The default threshold is p.val = 0.05. No best flux estimate is chosen based on p-value. If LM.p.val &lt; p.val, a warning is given in the columns quality.check and LM.diagnose to warn of an estimated flux below the detection limit.\n\n\nNumber of observations\nLimit below which a measurement is flagged for being too short (nb.obs &lt; warn.length). Portable greenhouse gas analyzers typically measure at a frequency of 1 Hz. Therefore, for the default setting of warn.length = 60, the chamber closure time should be approximately one minute (60 seconds). If the number of observations is smaller than the threshold, a warning is issued in the column quality.check.",
    "crumbs": [
      "best.flux"
    ]
  },
  {
    "objectID": "bestflux.html#usage",
    "href": "bestflux.html#usage",
    "title": "Automatic selection of the best flux estimate",
    "section": "Usage",
    "text": "Usage\n\n\n\n\n\n\nNote\n\n\n\nCode chunks under Usage sections are not part of the demonstration. They are meant to show you how to use the arguments in the function.\n\n\n\nbest.flux(\n  flux.result,\n  criteria = c(\"MAE\", \"RMSE\", \"AICc\", \"SE\", \"g.factor\", \"kappa\", \"MDF\", \"nb.obs\",\n    \"intercept\", \"p-value\"),\n  intercept.lim = NULL,\n  g.limit = 2,\n  p.val = 0.05,\n  k.ratio = 1,\n  warn.length = 60\n)\n\n\nArguments\n\n\n\n\n\n\n\nflux.result\ndata.frame; output from the function goFlux.\n\n\ncriteria\ncharacter vector; criteria used to assess the goodness of fit of the linear and non-linear flux estimates. Must be at least one the following: “MAE”, “RMSE”, “AICc”, “SE”, “g.factor”, “kappa”, “MDF”, “nb.obs”, “p-value”, or “intercept”. The default is all of them.\n\n\nintercept.lim\nnumerical vector of length 2; inferior and superior limits of the intercept (initial concentration; C0). Must be the same units as gastype in the goFlux function. If intercept.lim = NULL, the limits are calculated from the true values of C0 and Ct for each measurement.\n\n\ng.limit\nnumerical value; maximal limit of the g.factor (ratio between HM.flux and LM.flux). Recommended thresholds for the g.factor are 4 (flexible), 2 (medium), or 1.25 (conservative). The default limit is g.limit = 2.\n\n\np.val\nnumerical value; a limit for a statistically detectable flux. The default threshold is p-value &lt; 0.05.\n\n\nk.ratio\nnumerical value; maximal limit of the ratio between kappa and the kappa-max. Default is k.ratio = 1.\n\n\nwarn.length\nnumerical value; limit under which a measurement is flagged for being too short (nb.obs &lt; warn.length).\n\n\n\n\n\nDetails\nIn criteria, the indices of model fit “MAE”, “RMSE” and “SE” all have a threshold. For MAE and RMSE, the threshold is instrument precision (1σ). For SE, the threshold is the instrument accuracy (1σ/n​). These indices also compare the two models (linear, LM, and non-linear, HM). The selection of the best model based on indices of model fit (“MAE”, “RMSE”, “AICc” and “SE”) is based on a scoring system. Both models start with a score of 0. For each criteria, whichever model performs worst is given +1. After all selected criteria have been evaluated, the model with the lowest score wins. In case of a tie, the non-linear flux estimate is always chosen by default, as non-linearity is assumed. The score is printed in the output data frame in the columns HM.score and LM.score.\nThe g.limit indicates a threshold for the g.factor, which is the ratio between a non-linear flux estimate and a linear flux estimate. With the best.flux function, one can choose a limit at which the HM model is deemed to overestimate f0. Recommended thresholds for the g.factor are &lt;4 for a flexible threshold, &lt;2 for a medium threshold, or &lt;1.25 for a more conservative threshold. The default threshold is g.limit = 2. If the g.factor is above the specified threshold, the best flux estimate will switch to LM instead of HM and give a warning in the columns quality.check and HM.diagnose.\nThe minimal detectable flux (MDF) is calculated from the instrument precision, the measurement time and the flux.term. Below the MDF, the flux estimate is considered under the detection limit, but not null. Therefore, the function will not return a 0. There will simply be a warning in the columns quality.check, LM.diagnose or HM.diagnose to warn of a flux estimate under the detection limit. No best flux estimate is chosen based on MDF.\nThe parameter kappa determines the curvature of the non-linear regression in the Hutchinson and Mosier model. A maximal limit of kappa, k.max is included in the goFlux function, so that the non-linear flux estimate cannot exceed this maximum curvature. In the function best.flux, one can choose the linear flux estimate over the non-linear flux estimate based on the ratio between kappa and kappa-max (k.ratio). The ratio is expressed as a percentage, where 1 indicates HM.k = k.max, and 0.5 indicates HM.k = 0.5*k.max. The default setting is k.ratio = 1. If HM.k/k.max is larger than k.ratio, a warning is issued in the columns HM.diagnose and quality.check.\nIf the initial gas concentration (C0) calculated for the flux estimates are more or less than 10% of the difference between C0 and the final gas concentration at the end of the measurement (Ct), a warning is issued in the columns quality.check, LM.diagnose or HM.diagnose to warn of an intercept out of bounds. Alternatively, one can provide boundaries for the intercept, for example: intercept.lim = c(380, 420) for a true C0 of 400 ppm.\nThe argument p.val is only applicable to the linear flux. Under the defined p-value, the linear flux estimate is deemed non-significant, i. e., flux under the detection limit. The default threshold is p.val = 0.05. No best flux estimate is chosen based on p-value. If LM.p.val &lt; p.val, a warning is given in the columns quality.check and LM.diagnose to warn of an estimated flux under the detection limit.\nwarn.length is the limit under which a measurement is flagged for being too short (nb.obs &lt; warn.length). With nowadays’ portable greenhouse gas analyzers, the frequency of measurement is usually one observation per second. Therefore, for the default setting of warn.length = 60, the chamber closure time should be approximately one minute (60 seconds). If the number of observations is smaller than the threshold, a warning is issued in the column quality.check.\n\n\nValue\nThe function returns a data.frame identical to the input flux.result (output from the function goFlux) with the additional columns HM.diagnose, LM.diagnose, best.flux, model and quality.check. For each criteria selected, an additional column is also added to specify the limits used for those criteria (e.g. RMSE.lim, p.val.lim, etc.)\n\n\nExample\n\ndata(manID.UGGA)\nCO2_flux &lt;- goFlux(manID.UGGA, \"CO2dry_ppm\")\nCO2_best &lt;- best.flux(CO2_flux, criteria = c(\"MAE\", \"AICc\", \"g.factor\", \"MDF\"))",
    "crumbs": [
      "best.flux"
    ]
  },
  {
    "objectID": "bestflux.html#sec-save",
    "href": "bestflux.html#sec-save",
    "title": "Automatic selection of the best flux estimate",
    "section": "Save results",
    "text": "Save results\nRData results can be saved as RData, or any data frame can be saved as an Excel sheet following this procedure:\n\n# Save RData\nsave(CO2_best, file = \"CO2_result.RData\")\n# Save to Excel\nwrite.xlsx(CO2_best, file = \"CO2_result.xlsx\")",
    "crumbs": [
      "best.flux"
    ]
  },
  {
    "objectID": "flux2pdf.html",
    "href": "flux2pdf.html",
    "title": "Visual inspection",
    "section": "",
    "text": "Finally, after finding the best flux estimates, the user can plot the results and visually inspect the measurements using the function flux.plot and save the plots as pdf using flux2pdf.",
    "crumbs": [
      "Plots"
    ]
  },
  {
    "objectID": "flux2pdf.html#flux.plot",
    "href": "flux2pdf.html#flux.plot",
    "title": "Visual inspection",
    "section": "flux.plot",
    "text": "flux.plot\n\nUsage\n\n\n\n\n\n\nNote\n\n\n\nCode chunks under Usage sections are not part of the demonstration. They are meant to show you how to use the arguments in the function.\n\n\n\nflux.plot(\n  flux.results,\n  dataframe,\n  gastype,\n  shoulder = 30,\n  plot.legend = c(\"MAE\", \"AICc\", \"k.ratio\", \"g.factor\"),\n  plot.display = c(\"MDF\", \"prec\"),\n  quality.check = TRUE,\n  flux.unit = NULL,\n  flux.term.unit = NULL,\n  best.model = TRUE,\n  p.val.disp = \"round\",\n  side = \"left\"\n)\n\n\n\nArguments\n\n\n\n\n\n\n\nflux.results\na data.frame; output from the function best.flux\n\n\ndataframe\na data.frame containing gas measurements (see gastype below) and the following columns: UniqueID, Etime and flag (same dataframe as used with the function goFlux).\n\n\ngastype\ncharacter string; specifies which column was used for the flux calculations. Must be one of the following: “CO2dry_ppm”, “COdry_ppb”, “CH4dry_ppb”, “N2Odry_ppb”, “NH3dry_ppb” or “H2O_ppm”.\n\n\nshoulder\nnumerical value; time before and after measurement in observation window (seconds). Default is 30 seconds.\n\n\nplot.legend\ncharacter vector; specifies which parameters should be displayed in a legend above each plot. “flux” is always displayed. A maximum of 6 parameters can be displayed in the legend (including “flux”). Chose up to five extra parameters from the following: “MAE”, “RMSE”, “AICc”, “SErel”, “SE”, “r2”, “LM.p.val”, “HM.k”, “k.max”, “k.ratio” and “g.factor”. Default is plot.legend = c(\"MAE\", \"AICc\", \"k.ratio\", \"g.factor\").\n\n\nplot.display\ncharacter vector; specifies which parameters should be displayed on the plot. Choose from the following: “C0”, “Ci”, “cham.close”, “cham.open”, “crop”, “MDF”, “nb.obs”, “flux.term” and “prec”. Default is plot.display = c(\"MDF\", \"prec\").\n\n\nquality.check\nlogical; if quality.check = TRUE, the column quality.check (output from the function best.flux) is displayed below the plot.\n\n\nflux.unit\ncharacter string; flux units to be displayed on the plots. By default, the units are µmol m-2s-1 (if initial concentration is ppm, e.g. CO2dry_ppm) and nmol m-2s-1 (if initial concentration is ppb, e.g. CH4dry_ppb).\n\nFor example, one may want to use nmol kg-1h-1 for incubated soil samples. In such a case, write flux.unit = \"nmol~kg^-1*h^-1\".\n\n\nflux.term.unit\ncharacter string; units for the flux term to be displayed on the plots. By default, the units are mol m-2: flux.term.unit = \"mol~m^-2\"\n\n\nbest.model\nlogical; if best.model = TRUE, display a star sign next to the best model selected by the function best.flux.\n\n\np.val.disp\ncharacter string; how should the p-value be displayed in the legend above the plot. Choose one of the following: “star”, “round”, “value”.\n\n\nside\ncharacter string; choose a side to display C0 and Ci values. By default, they are displayed on the left side of the plot.\n\n\n\n\n\nDetails\nIn plot.legend, one may choose to display up to 5 additional parameters in a legend above the plots. Some parameters are displayed for both the linear model (LM.flux) and the non-linear model (HM.flux): Mean Absolute Error (MAE), Root Mean Square Error (RMSE), Aikaike’s Information Criterion corrected for small sample size (LM.AICc), Standard Error (SE), relative Standard Error (SErel), and coefficient of determination (r2). The p-value (LM.p.val) is displayed for the linear model only. The kappa (HM.k), kappa-max (k.max), kappa ratio (k.ratio) and g-factor (g.factor) are displayed for the Hutchinson and Mosier model only. One may choose to display no additional parameter with plot.legend = NULL.\nIn plot.display, one may chose to display some parameters on the plot: The initial gas concentration (C0) for both models, the assumed concentration of constant gas source below the surface (Ci) calculated from the Hutchinson and Mosier model, the number of observations (nb.obs) flagged, the Minimal Detectable Flux (MDF), the flux term (flux.term), the instrument precision (prec), the chamber closure (cham.close) and opening (cham.open) (indicated with a green star), and the data points between chamber closure and opening that have been removed (crop) (indicated in light red). For manual chamber measurements, because there is no automatic chamber closure and opening, no green stars can be displayed. In addition, crop is only relevant if data points have been removed with the function crop.meas (this function is not available yet). One may choose to display none of these parameters with plot.display = NULL. The order in which prec, flux.term, MDF and nb.obs are put in plot.display = c decides the order in which they are displayed at the bottom of the plot.\nIn flux.unit, remember to multiply the flux results with an appropriate factor to convert the results from a unit to another. If kilograms of soil were used to calculate the fluxes (see the details section of the function goFlux), the units would be µmol kg-1s-1. To convert the units to µmol kg-1h-1 instead, one would need to multiply the flux results by 3600 to convert from seconds to hours. To print non-ASCII characters use Unicode. For example, to print the Greek letter “mu” (µ), use the Unicode \\u03BC: flux.unit = \"\\u03BCmol~kg^-1*h^-1\".\nIn p.val.disp, if p.val.disp = \"star\", the p-values will be displayed as star symbols (asterisks) as follows: ***, ** or * for p-values of p &lt; 0.001, p &lt; 0.01 and p &lt; 0.05, respectively. If p.val.disp = \"round\", the p-values are rounded to p &lt; 0.001, p &lt; 0.01 and p &lt; 0.05. If p.val.disp = \"value\", the actual values are displayed, rounded to two significant numbers.\n\n\nValue\nThe function returns a list of plots, one per UniqueID, drawn from flux results (output from the functions goFlux and best.flux).\n\n\nExample\n\ndata(manID.UGGA)\n\n# CO2\nCO2_flux &lt;- goFlux(manID.UGGA, \"CO2dry_ppm\")\nCO2_best &lt;- best.flux(CO2_flux, criteria = c(\"MAE\", \"AICc\", \"g.factor\", \"MDF\"))\nCO2_plots &lt;- flux.plot(CO2_best, manID.UGGA, \"CO2dry_ppm\", shoulder=20,\n                       plot.legend = c(\"MAE\", \"RMSE\", \"AICc\", \"k.ratio\", \"g.factor\"), \n                       plot.display = c(\"MDF\", \"prec\", \"nb.obs\", \"flux.term\"), \n                       quality.check = TRUE)\n\n# CH4\nCH4_flux &lt;- goFlux(manID.UGGA, \"CH4dry_ppb\")\nCH4_best &lt;- best.flux(CH4_flux, criteria = c(\"MAE\", \"AICc\", \"g.factor\", \"MDF\"))\nCH4_plots &lt;- flux.plot(CH4_best, manID.UGGA, \"CH4dry_ppb\", shoulder=20,\n                       plot.legend = c(\"MAE\", \"RMSE\", \"AICc\", \"k.ratio\", \"g.factor\"), \n                       plot.display = c(\"MDF\", \"prec\", \"nb.obs\", \"flux.term\"), \n                       quality.check = TRUE)\n\n\n\n\n\n\n\nTip\n\n\n\nTo lighten your script, you can define arguments outside a function by storing their value in an object that is then used in the function instead. However, remember to use the arguments in the same order as they are required in the function.\n\n# best.flux\ncriteria = c(\"MAE\", \"AICc\", \"g.factor\", \"MDF\")\n\nCO2_best &lt;- best.flux(CO2_flux, criteria)\nCH4_best &lt;- best.flux(CH4_flux, criteria)\n\n# flux.plot \nplot.legend = c(\"MAE\", \"RMSE\", \"AICc\", \"k.ratio\", \"g.factor\")\nplot.display = c(\"MDF\", \"prec\", \"nb.obs\", \"flux.term\")\nquality.check = TRUE\n\nCO2_plots &lt;- flux.plot(CO2_best, manID.UGGA, \"CO2dry_ppm\", shoulder=20,\n                       plot.legend, plot.display, quality.check)\nCH4_plots &lt;- flux.plot(CH4_best, manID.UGGA, \"CH4dry_ppb\", shoulder=20,\n                       plot.legend, plot.display, quality.check)\n\nThis trick can help you reduce repetition and mistakes in your script.\n\n\n\n\n\n\n\n\nTipTip: Combine all gases in one pdf\n\n\n\nThe function flux.plot creates a list of plots, one per UniqueID. Multiple lists (e.g. one per gastype) can be combined to save all plots together with the flux2pdf function.\n\n# Combine plot lists into one list\nplot.list &lt;- c(CO2_plots, CH4_plots)",
    "crumbs": [
      "Plots"
    ]
  },
  {
    "objectID": "flux2pdf.html#flux2pdf",
    "href": "flux2pdf.html#flux2pdf",
    "title": "Visual inspection",
    "section": "flux2pdf",
    "text": "flux2pdf\nThe list of plots created with flux.plot can now be saved as a pdf using the function flux2pdf.\n\nUsage\n\nflux2pdf(plot.list, outfile = NULL, width = 11.6, height = 8.2)\n\n\n\nArguments\n\n\n\n\n\n\n\nplot.list\na list of plots; output from the function flux.plot.\n\n\noutfile\na character string indicating the full name of the pdf output file (including the path). Default is to save the pdf in the working directory, with the name of the plot.list.\n\n\nwidth\nnumerical value; width of the pdf page. Default is 11.6 inches.\n\n\nheight\nnumerical value; height of the pdf page. Default is 8.2 inches.\n\n\n\n\n\nExample\n\n# Save plots to pdf\nflux2pdf(plot.list, outfile = \"demo.results.pdf\")\n\nHere is an example of how the plots are saved as pdf:\n\n\n\n\n\n\nFigure 1",
    "crumbs": [
      "Plots"
    ]
  },
  {
    "objectID": "manualID.html",
    "href": "manualID.html",
    "title": "Identify start and end of measurements",
    "section": "",
    "text": "After import, the user can choose from two methods to define the start and end points of each measurement and assign a UniqueID:",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "manualID.html#usage",
    "href": "manualID.html#usage",
    "title": "Identify start and end of measurements",
    "section": "Usage",
    "text": "Usage\n\n\n\n\n\n\nNote\n\n\n\nCode chunks under Usage sections are not part of the demonstration. They are meant to show you how to use the arguments in the function.\n\n\n\nautoID(\n  inputfile,\n  auxfile = NULL,\n  obs.length = NULL,\n  deadband = 0,\n  crop.end = 0,\n  shoulder = 60,\n  drop = TRUE\n)",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "manualID.html#arguments",
    "href": "manualID.html#arguments",
    "title": "Identify start and end of measurements",
    "section": "Arguments",
    "text": "Arguments\n\n\n\n\n\n\n\ninputfile\ndata.frame; output from import or align functions.\n\n\nauxfile\ndata.frame; auxiliary data frame containing the columns start.time and UniqueID. start.time must contain a date and be in POSIXct format. The time zone must be the same as the POSIX.time in inputfile. The default time zone for the import functions is “UTC”. A data frame from the Smart Chamber (LI-8200) can be used as an auxiliary file. In that case, chamID will be used instead of UniqueID, if UniqueID cannot be found.\n\n\nobs.length\nnumerical; chamber closure time (seconds). Default is NULL. If obs.length is not provided, a column obs.length should be contained in auxfile or inputfile. Alternatively, obs.length will be calculated from start.time and cham.open or end.time if found in auxfile or inputfile.\n\n\ndeadband\nnumerical; time (seconds) at the start of the measurement, after chamber closure, to be removed from the time stamps used to estimate the flux.\n\n\ncrop.end\nnumerical; time (seconds) at the end of the measurement, before chamber opening, to be removed from the time stamps used to estimate the flux.\n\n\nshoulder\nnumerical; time before and after measurement in observation window (seconds). Default is 60 seconds. If the time between two measurements is smaller than shoulder, the time stamps are duplicated.\n\n\ndrop\nlogical; if drop = TRUE (default), time stamps without an assigned UniqueID are removed from the final data frame.",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "manualID.html#details",
    "href": "manualID.html#details",
    "title": "Identify start and end of measurements",
    "section": "Details",
    "text": "Details\nNote that, if the time between two measurements is smaller than shoulder, the time stamps are duplicated, which can result in an output data frame larger (more rows) than the inputfile. Conversely, if drop = TRUE, time stamps without an assigned UniqueID are removed from the final data frame, which can result in an output data frame smaller (less rows) than the inputfile.",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "manualID.html#examples",
    "href": "manualID.html#examples",
    "title": "Identify start and end of measurements",
    "section": "Examples",
    "text": "Examples\n\n# How to use in multiple situations:\nlibrary(dplyr)\n\n## with a LGR instrument and an auxiliary file (.txt)\naux.path &lt;- system.file(\"extdata\", \"aux_UGGA/aux_UGGA.txt\", package = \"goFlux\")\nauxfile &lt;- read.delim(aux.path) %&gt;%\n  mutate(start.time = as.POSIXct(start.time, tz = \"UTC\"))\ndata(imp.UGGA)\nautoID.UGGA &lt;- autoID(inputfile = imp.UGGA, auxfile = auxfile, obs.length = 180)\n\n## with a LI-COR instrument and the Smart Chamber as auxiliary file\ndata(imp.LI8200)\ndata(imp.LI7820)\nautoID.LI7820 &lt;- autoID(inputfile = imp.LI7820, deadband = 20, auxfile = imp.LI8200)\n\n## with the LI-6400 and no auxiliary file\ndata(imp.LI6400)\now.LI6400 &lt;- obs.win(inputfile = imp.LI6400, shoulder = 0)",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "manualID.html#sec-step1",
    "href": "manualID.html#sec-step1",
    "title": "Identify start and end of measurements",
    "section": "1. Create an auxiliary file",
    "text": "1. Create an auxiliary file\nThe auxiliary file (auxfile) requires two elements: a UniqueID and a start.time for each measurement. The UniqueID must be unique. For example, one could combine the name of a site (733a), a plot number (C) and a subplot (C), which would give the UniqueID “733a_C_C”. If repeated measurements are done on the same experimental unit, then a date (e.g. 2022-09-28) could be added to the UniqueID (e.g. “733a_C_C_220928”) to make it truly unique and easy to understand. The start.time must be in the format “%Y-%m-%d %H:%M:%S” (e.g. 2022-09-28 12:17:00) to be converted to POSIXct.\nYou can Download an example Excel spreadsheet that you can use to create your auxiliary file.\n\nLoad the auxfile\nCreating an auxiliary file with date and time can be a pain, especially while using Excel. It is recommended to save your file as .txt before import into R, to make sure that the date and time formats are appropriate (“%Y-%m-%d %H:%M:%S”, e.g. 2022-09-28 12:17:00).\n\nAs a text file (.txt)\nIn this example, the start.time for each measurement (UniqueID) was noted manually in the field, and are provided in an auxiliary file constructed in Excel and saved as a text file (aux_UGGA.txt).\n\naux.path &lt;- system.file(\"extdata\", \"aux_UGGA/aux_UGGA.txt\", package = \"goFlux\")\nauxfile &lt;- read.delim(aux.path) %&gt;% \n  # Use the function as.POSIXct to convert start.time to a POSIXct format\n  mutate(start.time = as.POSIXct(start.time, tz = \"UTC\"))\n\n\n\n  UniqueID          start.time Area Vtot Tcham Pcham\n1 733a_B_E 2022-09-28 12:36:00  324 6.17  11.0  99.4\n2 733a_B_S 2022-09-28 12:31:00  324 5.84  11.0  99.4\n3 733a_B_W 2022-09-28 12:26:00  324 6.40  10.9  99.4\n4 733a_C_C 2022-09-28 12:17:00  324 5.61  11.0  99.4\n5 733a_C_E 2022-09-28 12:21:00  324 6.00  11.0  99.4\n6 733a_C_S 2022-09-28 12:11:00  324 6.36  11.1  99.4\n\n\n\n\nAs an Excel spreadsheet (.xlsx)\nIt is also possible to load an Excel sheet into R using the function read_excel from the package readxl.\n\naux.path &lt;- system.file(\"extdata\", \"aux_UGGA/aux_UGGA.xlsx\", package = \"goFlux\")\nauxfile.xlsx &lt;- read_excel(aux.path)\n\nYou’ll note that this function detects Date format and converts it to POSIXct automatically.\n\nclass(auxfile.xlsx$start.time)\n\n[1] \"POSIXct\" \"POSIXt\" \n\n\nMake sure that the time zone in your auxfile matches the time zone in your imported gas measurements files. By default, all import functions, as well as the function read_excel, use the time zone UTC.\n\nauxfile.xlsx$start.time\n\n[1] \"2022-09-28 12:36:00 UTC\" \"2022-09-28 12:31:00 UTC\"\n[3] \"2022-09-28 12:26:00 UTC\" \"2022-09-28 12:17:00 UTC\"\n[5] \"2022-09-28 12:21:00 UTC\" \"2022-09-28 12:11:00 UTC\"\n\n\nIn this example, the auxfile also contains additional auxiliary data that will be required for the flux calculation: the surface area inside the chamber (Area; cm2), the total volume inside the chamber, the tubing, and the instrument (Vtot; L), the atmospheric temperature inside the chamber (Tcham; Celsius) and the atmospheric pressure inside the chamber (Pcham; kPa).\n\n\n\nIf start time is unknown\nIf field notes did not include the start.time of each measurement, it is possible to quickly construct an auxfile by visually inspecting each gas measurement files.\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"UGGA/UGGA.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.UGGA &lt;- import.UGGA(inputfile = file.path)\n\n# Visualise data\nplot(x = imp.UGGA$POSIX.time, y = imp.UGGA$CO2dry_ppm, # Data\n     xlab = \"Time\", ylab = \"CO2dry_ppm\", # Labels\n     ylim = c(400, 550)) # Plot limits\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTipTip to improve x axis time display\n\n\n\nTo help visualize the time on the x axis, remove the x axis in the function plot and use the function axis.POSIXct to display the time in the desired format:\n\n# Visualise data\nplot(x = imp.UGGA$POSIX.time, y = imp.UGGA$CO2dry_ppm, # Data\n     xlab = \"Time\", ylab = \"CO2dry_ppm\", # Labels\n     ylim = c(400, 550), # Plot limits\n     xaxt = 'n') # remove x axis tick marks\n\n# get the right time zone from your data\ntime.zone &lt;- attr(imp.UGGA$POSIX.time, \"tzone\")\n# force axis.POSIXct to use that time zone by changing the system timezone\nSys.setenv(TZ = time.zone)\n# add the new x axis to the plot\naxis.POSIXct(1, at = seq(min(imp.UGGA$POSIX.time), max(imp.UGGA$POSIX.time), \n                         by = \"3 mins\"), format = \"%H:%M\")\n# change the system timezone back to default\nSys.unsetenv(\"TZ\")\n\n\n\nIn this example there are six measurements of approximately three minutes each. Looking at the graph, you can roughly estimate the start time of each measurement:\n\n\n\n\n\n\n\n\n\nPeak_#\nUniqueID\nstart.time\n(estimated)\nstart.time\n(from field notes)\n\n\n\n\nPeak_1\n733a_C_S\n12:12:00\n12:11:00\n\n\nPeak_2\n733a_C_C\n12:18:00\n12:17:00\n\n\nPeak_3\n733a_C_E\n12:23:00\n12:21:00\n\n\nPeak_4\n733a_B_W\n12:27:00\n12:26:00\n\n\nPeak_5\n733a_B_S\n12:33:00\n12:31:00\n\n\nPeak_6\n733a_B_E\n12:37:00\n12:36:00\n\n\n\nIn the next step (2), you will define a window of observation for each measurement based on the start.time, the observation length (obs.length) and some buffer time (shoulder) before and after the measurement. Knowing this, it does not matter how exact your estimation is, because you can allow for more buffer before and after the measurement.",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "manualID.html#sec-step2",
    "href": "manualID.html#sec-step2",
    "title": "Identify start and end of measurements",
    "section": "2. Define a window of observation for each measurement",
    "text": "2. Define a window of observation for each measurement\nIn the next step (3), you must click on the start point and the end point of each measurement in a scatter plot to identify the start.time and the end.time, using the function click.peak2. Before that, you must create a list of data frame containing one data frame per UniqueID using the function obs.win. In this example, this step will separate the file imp.UGGA into a list of 6 data frames.\nThe purpose of this step is to zoom in on each measurement in the file to help you identify the start and end time more easily. In order to correctly zoom in on each measurement, you must know the start.time (defined in step 1) and the observation length (obs.length) of each measurement. In addition, you can define some buffer time around each measurement in case the defined start.time is not exact. If the observation length is different for each measurement, use the longest one.\n\nUsage\n\nobs.win(\n  inputfile,\n  auxfile = NULL,\n  gastype = \"CO2dry_ppm\",\n  obs.length = NULL,\n  shoulder = 120\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ndata.frame; output from import or align functions.\n\n\nauxfile\ndata.frame; auxiliary data frame containing the columns start.time and UniqueID. start.time must contain a date and be in POSIXct format. The time zone must be the same as the POSIX.time in inputfile. The default time zone for the import functions is “UTC”. A data frame from the Smart Chamber (LI-8200) can be used as an auxiliary file. In that case, chamID will be used instead of UniqueID, if UniqueID cannot be found.\n\n\ngastype\ncharacter string; specifies which gas should be displayed on the plot to manually select start time and end time of measurements. Must be one of the following: “CO2dry_ppm”, “COdry_ppb”, “CH4dry_ppb”, “N2Odry_ppb”, “NH3dry_ppb” or “H2O_ppm”. Default is “CO2dry_ppm”.\n\n\nobs.length\nnumerical; chamber closure time (seconds). Default is NULL. If obs.length is not provided, a column obs.length should be contained in auxfile or inputfile. Alternatively, obs.length will be calculated from start.time and cham.open or end.time if found in auxfile or inputfile.\n\n\nshoulder\nnumerical; time before and after measurement in observation window (seconds). Default is 120 seconds.\n\n\n\n\n\nDetails\nIn gastype, the gas species listed are the ones for which this package has been adapted. Please write to the maintainer of this package for adaptation of additional gases.\n\n\nExample\nIn this example, the observation length was approximately three minutes (180 seconds) for each measurement. For a shoulder of 60 seconds, the observation window of each measurement will show 60 seconds before the start.time and 240 seconds after.\n\now.UGGA &lt;- obs.win(inputfile = imp.UGGA, auxfile = auxfile,\n                   obs.length = 180, shoulder = 60)\n\n\n\n\nPeak_#\nUniqueID\nstart.time\nobs.win min\nobs.win max\n\n\n\n\nPeak_1\n733a_C_S\n12:11:00\n12:10:00\n12:15:00\n\n\nPeak_2\n733a_C_C\n12:17:00\n12:16:00\n12:21:00\n\n\nPeak_3\n733a_C_E\n12:21:00\n12:20:00\n12:25:00\n\n\nPeak_4\n733a_B_W\n12:26:00\n12:25:00\n12:30:00\n\n\nPeak_5\n733a_B_S\n12:31:00\n12:30:00\n12:35:00\n\n\nPeak_6\n733a_B_E\n12:36:00\n12:35:00\n12:40:00\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nNote that, in this example, there is an overlap between the peaks 2 and 3. Therefore, 60 seconds of the data will be duplicated in the data frames of these two UniqueID.\n\n\n\n\n\n\n\n\nTipTip: Use the function on multiple files at a time\n\n\n\nTo load multiple RData files at once in your environment and store them all in one object, use the function map_df from the package purrr.\nUse the argument pattern to load only the files that match a pattern.\n\nmy.files &lt;- list.files(path = \"RData\", pattern = \"imp.RData\", full.names = TRUE) %&gt;%\n  map_df(~ get(load(.x)))\n\now.UGGA &lt;- obs.win(inputfile = my.files, auxfile = auxfile,\n                   obs.length = 180, shoulder = 60)\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nPay attention to the warning message given by obs.win when there are more than 20 measurements (which is not the case in this example). If there had been more than 20 measurements, a warning like this would appear:\n\n\nWARNING! Do not loop through more than 20 measurements at a time to avoid mistakes.\nYou have 21 measurements in your dataset.\nYou should split the next step into at least 2 loops.\n\n\nIn such a case, follow this tip with the function click.peak2",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "manualID.html#sec-step3",
    "href": "manualID.html#sec-step3",
    "title": "Identify start and end of measurements",
    "section": "3. Click on a scatter plot to identify start and end times",
    "text": "3. Click on a scatter plot to identify start and end times\nWhen running the function click.peak2, for each measurement, a window will open, in which you must click on the start point and the end point. The observation window is based on the start.time given in the auxfile, the length of the measurement (obs.length), and a shoulder before start.time and after start.time + obs.length.\n\nUsage\n\nclick.peak2(\n  ow.list,\n  gastype = \"CO2dry_ppm\",\n  sleep = 3,\n  plot.lim = c(380, 1000),\n  seq = NULL,\n  warn.length = 60,\n  save.plots = NULL,\n  width = 14,\n  height = 8,\n  abline = TRUE,\n  abline_corr = TRUE\n)\n\n\n\nArguments\n\n\n\now.list\nlist of data.frame; output from the function obs.win. Must contain the columns gastype (see below), POSIX.time and UniqueID.\n\n\ngastype\ncharacter string; specifies which gas should be displayed on the plot to manually select start time and end time of measurements. Must be one of the following: “CO2dry_ppm”, “COdry_ppb”, “CH4dry_ppb”, “N2Odry_ppb”, “NO2dry_ppb”, “NOdry_ppb”, “NH3dry_ppb” or “H2O_ppm”. Default is “CO2dry_ppm”.\n\n\nsleep\nnumerical value; delay before closing the resulting plot. Grants a delay between measurements to visually inspect the output before processing the next measurement. Sleep must be shorter than 10 seconds. If sleep = NULL, the plots will not close.\n\n\nplot.lim\nnumerical vector of length 2; sets the Y axis limits in the plots. Default values are set for a typical gas measurement of “CO2dry_ppm” from soils: plot.lim = c(380,1000).\n\n\nseq\na numerical sequence that indicates objects in a list. By default, seq = NULL and the function loops through all data frames in ow.list.\n\n\nwarn.length\nnumerical value; limit under which a measurement is flagged for being too short (nb.obs &lt; warn.length). Default value is warn.length = 60.\n\n\nsave.plots\ncharacter string; a file path with the extension .pdf to save the plots produced with click.peak2. By default, save.plot = NULL and plots are not saved.\n\n\nwidth\nnumerical value; width of the pop-up window.\n\n\nheight\nnumerical value; height of the pop-up window.\n\n\nabline\nlogical; if TRUE (default), blue vertical lines indicate start.time and end.time on both plots.\n\n\nabline_corr\nlogical; if TRUE (default), red vertical lines indicate start.time_corr and end.time_corr on validation plot.\n\n\n\n\n\nDetails\nThe argument plot.lim is used to remove any data points below and above the plot limits for a better view of the scatter plot. If the gas measurements are larger than the minimum or smaller than the maximum plot limit values, then the plot will automatically zoom in and adjust to those values. The default plot limits are set for a typical gas measurement of “CO2dry_ppm” from a soil respiration measurement: plot.lim = c(380,1000), where 380 ppm is the minimum plotted concentration, which should be close to atmospheric concentration, and 1000 ppm is the maximum plotted concentration, which correspond to a maximal accumulated concentration in the chamber before considering it an outlier (e.g. caused by breath or gas bubble). For other gasses, the user must specify the plot limits themselves. Here are some suggestions of plot limits for the other gases:\n\n“CH4dry_ppb”: plot.lim = c(2200, 1800)\n“N2Odry_ppb”: plot.lim = c(250, 500)\n“NH3dry_ppb”: plot.lim = c(0, 200)\n“COdry_ppb”: plot.lim = c(0, 200)\n“H2O_ppm”: plot.lim = c(10000, 20000)\n\nThese values will vary depending on ecosystem type and chamber application scheme.\nThe argument seq is used to select a subset of data frame from the list of data frames in ow.list. For example, to apply the function on the first measurement in the list, set seq = 1, or seq = seq(1,10) for the first 10 measurements.\nwarn.length is the limit below which the chamber closure time is flagged for being too short (nb.obs &lt; warn.length). Portable greenhouse gas analyzers typically measure at a frequency of 1 Hz. Therefore, for the default setting of warn.length = 60, the chamber closure time should be approximately one minute (60 seconds). If the number of observations is smaller than the threshold, a warning is printed: “Number of observations for UniqueID: ‘UniqueID’ is X observations”.\nIn gastype, the gas species listed are the ones for which this package has been adapted. Please write to the maintainer of this package for adaptation of additional gases.\nThe arguments width and heigth are used with the function dev.new to define the dimensions of the pop-up window.\n\n\nValue\nThe function returns a data.frame, identical to an unlisted version of the input ow.list, with the additional flag, Etime, start.time_corr, end.time_corr and obs.length_corr.\n\n\nExample\n\n\n\n\n\n\nImportantWARNING! About pop-up graphics device\n\n\n\nThis function makes use of the function graphics::identify() which is only supported on screen devices such as X11, windows and quartz. It is therefore essential to verify that your system options are compatible with this function before running it, to avoid errors. Here is an example of how to modify your system options for graphics device:\n\ndefault.device &lt;- getOption(\"device\") # save default option\noptions(device = \"X11\") # change system option to device = \"X11\"\n\nAfter using the function click.peak2, remember to revert back to your default system option.\n\noptions(device = default.device) # revert back to default option \n\n\n\nIn this example, the observation time is 3 minutes (180 seconds) and the shoulder is 60 seconds. Therefore, the observation window shows 60 seconds before the start.time and 240 seconds after.\n\n# Manually identify measurements by clicking on the start and end points\nmanID.UGGA &lt;- click.peak2(ow.UGGA, seq = 1)\n\n\n\n\n\n\n\nFigure 1\n\n\n\n\n\n\n\n\n\nFigure 2\n\n\n\n\n\n\n\n\n\nTip 1: Multiple loops with large data sets\n\n\n\nNote that the output from the function obs.win is a list of data frames. The function click.peak2 loops through all data frames in the list.\nFor more than 20 measurements, it is highly recommended to create multiple loops. This helps avoid issues with miss-clicking and repeating the process.\nIf you need to create multiple loops, use the argument seq in click.peak2:\n\n# Create two loops\nmanID.UGGA.1 &lt;- click.peak2(ow.UGGA, seq = seq(1,10))\nmanID.UGGA.2 &lt;- click.peak2(ow.UGGA, seq = seq(11,20))\n\n# Combine the two objects back into one object\nmanID.UGGA &lt;- rbind(manID.UGGA.1, manID.UGGA.2)\n\n\n\n\n\n\n\n\n\nTipSleep between loops\n\n\n\nBetween each measurement, the result of the function click.peak2 is displayed for 3 seconds. To increase this delay, change the parameter sleep in the function click.peak2. To prevent the quality check plots from closing, use sleep = NULL.\n\n\n\n\n\n\n\n\nTipSave plots\n\n\n\nBoth plots generated in the function click.peak2 can be saved as a pdf using the argument save.plots with a character string indicating the name of the pdf file (without the extension .pdf):\n\nmanID.UGGA &lt;- click.peak2(ow.UGGA, save.plots = \"click.peak.plots\")\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nIf the number of observation is under a certain threshold (warn.length = 60), a warning will be given after clicking on the start and end points as such:\n\n\nWarning message: Number of observations for UniqueID: 733_C_C is 59 observations\n\n\nOtherwise, if the number of observation satisfies this threshold, then the following message is given instead:\n\n\nGood window of observation for UniqueID: 733a_C_C\n\n\nThis argument can be adjusted depending on the expected number of observations in your experiment.\n\n\n\n\n\n\n\n\nTip\n\n\n\nTo re-click on a single measurement based on UniqueID, see this example shown on the Troubleshoot page.\n\n\n\nAdditional auxiliary parameters\nTo convert the flux estimate’s units into nmol CO2/H2O m-2s-1 or µmol CH4/N2O m-2s-1, the temperature inside the chamber (Tcham; °C) and the atmospheric pressure inside the chamber (Pcham; kPa) are also required. If Pcham and Tcham are missing, normal atmospheric pressure (101.325 kPa) and an air temperature of 15 °C are used as default.\nAdditionally, one must provide the surface area inside the chamber (Area; cm2) and the total volume in the system, including tubing, instruments and chamber (Vtot; L). If Vtot is missing, one must provide an offset (distance between the chamber and the soil surface; cm) and the volume of the chamber (Vcham; L). In that case, the volume inside the tubing and the instruments is considered negligible, or it should be added to Vcham.\nThe final output, before flux calculation with goFlux requires the columns: UniqueID, Etime, flag, Vtot (or Vcham and offset), Area, Pcham, Tcham, H2O_ppm and other gases.",
    "crumbs": [
      "Measurement ID"
    ]
  },
  {
    "objectID": "example.html",
    "href": "example.html",
    "title": "Complete downloadable examples",
    "section": "",
    "text": "Once you have been through the rest of this website and understood the purpose of each function, you can download these example scripts and modify them to your needs.\nFollow the simple workflow if you have few raw files and measurements, or follow the divided workflow if you have multiple instruments and large amounts of raw files and measurements.\nBoth workflows are using the ultra-portable GHG analyzer from Los Gatos Research with an auxiliary file as an example.\n\nCreate an auxiliary file\nTo help you create an auxiliary file (used for the manual identification of measurements), you can Download this example Excel spreadsheet.\n\n\nSimple workflow\nThis simple workflow is contained in one script and goes through all steps, from import to producing plots with flux2pdf. It works best with few raw files and measurements. Download\n\n\nDivided workflow\nAll steps of the workflow are divided into one script per step. This is especially useful when adaptations are required after each step. Short scripts are better than one long messy script. Download",
    "crumbs": [
      "Examples"
    ]
  },
  {
    "objectID": "other.html",
    "href": "other.html",
    "title": "Other functions in the package goFlux",
    "section": "",
    "text": "Aside from the typical workflow of flux calculation, one may wish to estimate other parameters from gas measurements. Currently, this page only contains one additional function. To request more complementary functions, open an issue on GitHub or contact the maintainer of this package, Karelle Rheault (karh@ign.ku.dk), directly.\n\niso.comp for isotopic composition determination\nExtracts the y-intercept of the regression between the isotope ratios (13C, 15N or 18O) plotted againts the inverse of the gas concentration (CO2 or N2O).\n\nUsage\n\n\n\n\n\n\nNote\n\n\n\nCode chunks under Usage sections are not part of the demonstration. They are meant to show you how to use the arguments in the function.\n\n\n\niso.comp(\n  dataframe,\n  CO2dry_ppm = \"CO2dry_ppm\",\n  delta_13C = \"Delta_Raw_iCO2\",\n  N2Odry_ppb = \"N2Odry_ppb\",\n  delta_15N = \"d15N\",\n  delta_18O = \"d18O\",\n  save.plots\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ndataframe\na data.frame containing measurements of isotopic fractions of CO2 or N2O and a UniqueID (or chamID) per measurements.\n\n\nCO2dry_ppm, delta_13C\ncharacter string; specifies which columns should be used for CO2 measurements, and the delta 13C, respectively.\n\n\nN2Odry_ppb, delta_15N, delta_18O\ncharacter string; specifies which columns should be used for N2O measurements, the delta 15N and the delta 18O, respectively.\n\n\nsave.plots\ncharacter string; a file path with the extension .pdf to save Keeling plots. By default plots are not saved.\n\n\n\n\n\nExample\n\ndata(manID.G2201i)\nmy.iso.comp &lt;- iso.comp(manID.G2201i)",
    "crumbs": [
      "Other functions"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "goFlux, For User-Friendly Chamber Data Processing, Flux Estimation, and Diagnostics",
    "section": "",
    "text": "WarningYour contribution\n\n\n\nThe package is ready to use and fully functional, but errors may still occur. To report any issues, suggest improvements or ask for new features, open an issue on GitHub. Alternatively, contact directly the maintainer, Karelle Rheault (karh@ign.ku.dk), including script and raw data if necessary. Thank you for helping me in the development of this tool! 🙏",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "index.html#one-package-to-rule-them-all",
    "href": "index.html#one-package-to-rule-them-all",
    "title": "goFlux, For User-Friendly Chamber Data Processing, Flux Estimation, and Diagnostics",
    "section": "One Package to rule them all",
    "text": "One Package to rule them all\nNon-steady state (static) chambers are widely used for measuring soil greenhouse gas (GHG) fluxes, such as CO2, CH4, N2O, NH3, CO, and water vapor (H2O). While linear regression (LM) is commonly used to estimate GHG fluxes, this method tends to underestimate the pre-deployment flux (f0). Indeed, non-linearity is expected when the gas concentration increases or decreases inside a closed chamber, due to changes in gas gradients between the soil and the air inside the chamber. In addition, lateral gas flow and leakage contribute to non-linearity. Many alternative to LM have been developed to try to provide a more accurate estimation of f0, for instance the method of Hutchinson and Mosier [1] (HM), which was implemented in the HMR package by Pedersen et al. (2010) [2]. However, non-linear models have a tendency to largely overestimate some flux measurements, due to an exaggerated curvature. Therefore, the user is expected to decide which method is more appropriate for each flux estimate. With the advent of portable greenhouse gas analyzers (e.g. Los Gatos Research (ABB) laser gas analyzers), soil GHG fluxes have become much easier to measure, and more efficient ways to calculate these flux estimates are needed in order to process large amounts of data. A recent approach was developed by Hüppi et al. (2018) [3] to restrict the curvature in the HM model for a more reliable flux estimate. In the HM model, the curvature is controlled by the kappa parameter, \\(\\kappa\\). Hüppi et al. [3] suggest the use of the KAPPA.MAX to limit the maximal curvature allowed in the model (see their R package gasfluxes, available on the CRAN). This procedure introduces less arbitrary decisions in the flux estimation process.\nPrevious software developed to calculate GHG fluxes are limited in many aspects that the goFlux package is meant to overcome. Most are limited to the linear regression approach (e.g. Flux Puppy, and the R packages flux and FluxCalR), others do not include data pre-processing (e.g. the R packages HMR, flux and gasfluxes), or if they do, they are compatible with only a few designated systems (e.g. Flux Puppy and FluxCalR), and none include an automatic selection of the best flux estimate (LM or HM) based on objective criteria, except the R packages gasfluxes and HMR.\nThis new R package, goFlux is meant to be “student proof”, meaning that no extensive knowledge or experience is needed to import raw data into R, choose the best model to calculate fluxes (LM or HM), quality check the results objectively and obtain high quality flux estimates. The package contains a wide range of functions that allows the user to import raw data from a variety of instruments (LI-COR, LGR, GAIA2TECH, Gasmet, Picarro, Aeris and PP-Systems); calculate fluxes from a variety of GHG (CO2, CH4, N2O, NH3, CO and H2O) with both linear (LM) and non-linear (HM) flux calculation methods; align instruments clocks after data import; interactively identify measurements (start and end time) if there are no automatic chamber recordings (e.g. LI-COR smart chamber); plot measurements for easy visual inspection; and quality check the measurements based on objective criteria.\n\nThree R packages for the Elven-kings under the CRAN,\nSeven for the Dwarf-lords in their halls of open software,\nNine for Mortal Men doomed to write scripts themselves,\nOne for the Dark Lady on her dark throne\nIn the Land of GitHub where the Shadows lie.\nOne Package to rule them all, One Package to find them,\nOne Package to bring them all and in the darkness bind them\nIn the Land of GitHub where the Shadows lie.",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "index.html#analysis-workflow",
    "href": "index.html#analysis-workflow",
    "title": "goFlux, For User-Friendly Chamber Data Processing, Flux Estimation, and Diagnostics",
    "section": "Analysis workflow",
    "text": "Analysis workflow\nThis package will help you import raw data into R, identify measurements, calculate fluxes, select the best flux estimate (LM or HM), save the results as RData or Excel spreadsheet, and visually inspect the results on plots that can be saved as pdf.\nClick on the tabs on the sidebar to navigate through each step, or follow the links in the table of contents below.\n\nInstall the package\nImport raw data into R\nIdentify start and end points of measurements\nCalculate GHG flux estimates (LM and HM)\nAutomatically select the best flux estimate\nSave results as RData or Excel\nPlot results and save as pdf",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "index.html#how-to-cite",
    "href": "index.html#how-to-cite",
    "title": "goFlux, For User-Friendly Chamber Data Processing, Flux Estimation, and Diagnostics",
    "section": "How to cite",
    "text": "How to cite\nPlease cite this R package using this publication in JOSS:\n\nRheault et al., (2024). goFlux: A user-friendly way to calculate GHG fluxes yourself, regardless of user experience. Journal of Open Source Software, 9(96), 6393, https://doi.org/10.21105/joss.06393",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "index.html#josscast",
    "href": "index.html#josscast",
    "title": "goFlux, For User-Friendly Chamber Data Processing, Flux Estimation, and Diagnostics",
    "section": "JOSSCast",
    "text": "JOSSCast\nWanna know more about how goFlux came to be?\nWatch my interview on JOSSCast with Abigail Cabunoc Mayes & Arfon Smith, from the Journal of Open Source Software, on Spotify, Youtube or Apple Podcasts 👇\nVideo\nEpisode highlights:\n\n[02:03] - Karelle’s Journey to Creating goFlux\n[02:56] - Understanding Greenhouse Gas Fluxes\n[05:19] - Measurement Techniques and Tools\n[09:30] - Challenges and Advantages of goFlux\n[20:20] - Open Source Contributions and Community Support\n[23:57] - Karelle’s Experience with JOSS\n[27:00] - Future Plans and Contributions\n[28:59] - Organizing the Community and Setting Standards\n[31:27] - Conclusion and Farewell",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "index.html#acknowledgements",
    "href": "index.html#acknowledgements",
    "title": "goFlux, For User-Friendly Chamber Data Processing, Flux Estimation, and Diagnostics",
    "section": "Acknowledgements",
    "text": "Acknowledgements\nThis software development was supported by the SilvaNova project funded by the NOVO Nordisk Foundation (grant no. NNF20OC0059948).",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "import.html",
    "href": "import.html",
    "title": "Import raw data",
    "section": "",
    "text": "The package contains a wide range of functions that let the user import raw data from a variety of instruments:\nThere are two ways to import raw data files into R:",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#usage",
    "href": "import.html#usage",
    "title": "Import raw data",
    "section": "Usage",
    "text": "Usage\n\n\n\n\n\n\nNote\n\n\n\nCode chunks under Usage sections are not part of the demonstration. They are meant to show you how to use the arguments in the function.\n\n\n\nimport2RData(\n  path,\n  instrument,\n  date.format,\n  timezone = \"UTC\",\n  keep_all,\n  prec,\n  merge,\n  ...\n)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#arguments",
    "href": "import.html#arguments",
    "title": "Import raw data",
    "section": "Arguments",
    "text": "Arguments\n\n\n\npath\ncharacter string; a folder path containing all files to be imported. Ideally, to avoid any errors, the folder should only contain the files to be imported.\n\n\ninstrument\ncharacter string; specifies which instrument was used to generate the files contained in the folder path. Choose one of the following: “DX4015”, “EGM5”, “G2201i”, “G2508”, “G4301”, “GAIA”, “GasmetPD”, “GT5000”, “HT8850”, “LI-6400”, “LI-7810”, “LI-7820”, “LI-8100”, “LI-8150”, “LI-8200”, “LI-8250”, “N2OM1”, “N2Oi2”, “skyline”, “uCH4”, “uN2O”, “UGGA”. For more information about an instrument, see the section “See Also” below.\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec, prec1, prec2, prec3\nnumerical vector; the precision of the instrument for each gas. Look at the examples below, or the help for each import function of each instrument, to know what values to use.\n\n\nmerge\nlogical; if TRUE, merge all files as one data frame and return it in the Console, or load it in the Environment if assigned to an object.\n\n\nproc.data.field\nnumeric value; select the process data field used with the EGM-5. See import.EGM5 for more details.\n\n\npivot\ncharacter string; either “long” or “wide”. If pivot = \"long\", each column containing information about Tsoil, Tcham, SWC, PAR and operating status (Op.stat) will be saved in a single column per parameter. If pivot = \"wide\", the default display of one column per chamber per parameter will be used. Used with instrument = \"GAIA\" only.\n\n\nactive\nlogical; if active = TRUE, preserve data for active chambers only. Used with instrument = \"GAIA\" only.\n\n\nflag\nnumeric vector; indicates the operating status that should be used for the flux calculation. Default is flag = c(7,11), where 7 indicates “Chamber Idle Closed Clear” and 11 indicates “Chamber Idle Closed Dark”. Used with instrument = \"GAIA\" only.\n\n\nbackground\nlogical; if background = FALSE, removes all data from opened chambers. Used with instrument = \"GAIA\" only.\n\n\ndeadband\nnumerical; define a deadband at the start of measurements (seconds). Used with instrument = \"skyline\" only.\n\n\nshoulder\nnumerical; include background data points before and after the measurement (seconds). Used with instrument = \"skyline\" only.\n\n\nCH.clo.col, Op.stat.col, PAR.col, Tcham.col, Tsoil.col, SWC.col, WTD.col, CH.col\ncharacter vector; a pattern to match the columns that fit the corresponding parameter. See import.GAIA, import.LI8250, or import.skyline for more details.\n\n\nsensor1, sensor2\ncharacter strings; a pattern to match the columns containing the name of each sensor. By default, sensor1 = \"Analog Sensor1\", sensor2 = \"Analog Sensor2\", to match the example data file provided with the package. Set to NULL to ignore these columns. Used with instrument = \"skyline\" only.\n\n\ninst, inst1, inst2, inst3\ncharacter strings; a pattern to match the columns containing the name of each instrument. See import.GAIA, import.LI8250 or import.skyline for more details.\n\n\ngas, gas1, gas2, gas3\ncharacter vectors; a pattern to match the columns containing each gas measurement. See import.GAIA, import.LI8250, import.GasmetPD or import.skyline for more details.\n\n\ndry, dry1, dry2, dry3\nlogical; are the gas measurements compensated for water vapor (dry fraction)? If dryX = TRUE (default), the gases are compensated for water vapor, and will be named accordingly. See import.GAIA, import.LI8250 or import.skyline for more details.\n\n\nmanual\nlogical; indicates if measurements were made manually and there are no records of chamber identification, sequence, etc. If TRUE, the arguments Op.stat.col, CH.col, active, background, flag, and pivot are ignored. Used with instrument = \"GAIA\" only.\n\n\nsep\ncharacter string defining the field separator character. Values on each line of the file are separated by this character. By default, sep = \"\\t\" for tabulation. Used with instrument = \"GAIA\" only.\n\n\nskip\ninteger; the number of lines of the data file to skip before beginning to read data. By default, skip = 1. Used with instrument = \"GAIA\" only.\n\n\nCH4\ncharacter string; which column should be used for CH4 concentration. By default, CH4 = \"HP_12CH4_dry\". Used with instrument = \"G2201i\" only.\n\n\nCO2\ncharacter string; which column should be used for CO2 concentration. By default, CO2 = \"12CO2_dry\".Used with instrument = \"G2201i\" only.\n\n\nsum\nlogical; if sum = TRUE (default), the arguments CH4 and CO2 are ignored and, instead, both fractions (carbon isotope 12 and 13) of each gas, are summed after correction for water vapor, to obtain the total gas concentration. See the argument range for the selection between the HP or the HR measurement of CH4 concentration. Used with instrument = \"G2201i\" only.\n\n\nrange\nnumerical value; at which threshold should the function select between high precision (HP) and high resolution (HR) of CH4 concentration? The default is range = 10. If the methane concentration recorded in the column HP_12CH4_dry is above 10 ppm, the concentration from the columns HR_12CH4_dry and HR_13CH4 are used for the sum instead of HP. Used with instrument = \"G2201i\" only.",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#details",
    "href": "import.html#details",
    "title": "Import raw data",
    "section": "Details",
    "text": "Details\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For most instruments, the date is one of the columns in the raw data file:\n\nDX4015: column Date\nEGM5: column Date\nG2201i: column DATE\nG2508: column DATE\nG4301: column DATE\nGAIA: column Titles:\nGasmetPD: column Date\nGT5000: column Date\nHT8850: column time\nLI-6400: (see comment below)\nLI-7810: column DATE\nLI-7820: column DATE\nLI-8100: column Date\nLI-8150: column Date\nLI-8200: (see comment below)\nN2OM1: column Time\nN2Oi2: column Time\nSkyLine: column Titles:\nuCH4: column Time Stamp\nuN2O: column Time Stamp\nUGGA: column Time\n\nFor the instrument LI-6400, the date is found in one of the first lines in a format containing abbreviations, for example “Thr Aug 6 2020”, which would be the date format “mdy”. For the instrument LI-8200, the date is found under one of the measurements, next to ‘“Date”:’. For the instrument LI-8250, the date format is in the file name.\nThe argument proc.data.field is used with the PP-Sytems EGM-5 instrument only. Look up the EGM-5 Operation Manual at page 90 for more details about the different Process Data Fields (proc.data.field).\nThe arguments active, pivot, flag, background, CH.col, PAR.col, Tcham.col, WTD.col, Op.stat.col, inst3, gas3, prec3, dry3, sep and skip are used with the function import.GAIA only. The arguments Tsoil.col, SWC.col, inst1, inst2, gas1, gas2, prec1, prec2, dry1, dry2, are used with both the function import.GAIA and the function import.LI8250.\nThe arguments CH4, CO2, sum and range are used with the function import.G2201i only.\nThe arguments CH.clo.col, sensor1, sensor2, inst and dry are used with the function import.skyline only.\nThe argument gas is used with the functions import.GasmetPD and import.skyline.",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#examples",
    "href": "import.html#examples",
    "title": "Import raw data",
    "section": "Examples",
    "text": "Examples\nAll files contained in the folder path specified are saved in a newly created folder “RData” in your working directory.\n\n\n\n\n\n\nImportant\n\n\n\nIn all examples, an example file from the package goFlux is retrieved using the function system.file to be used in the example. However, to use the function with your own data, the argument path must be the folder path containing your files:\n\nimport2RData(path = \"your_raw_data_folder\", instrument = \"DX4015\", \n             date.format = \"ymd\", prec = c(1.6, 23, 13, 2, 23, 33))\n\n\n\n\n\n\n\n\n\nNoteFiles in sub-folders\n\n\n\nNote that all files with the right extension (i.e., .dat, .txt, etc.) will be converted to RData when there are sub-folders within the folder specified in the path argument of the function.\nFor example, the instrument G2201-i from Picarro normally saves raw files with a folder structure like such: year/month/day, with one (or sometimes more) file saved per daily folder. If one specifies in the function the folder path “month”, all raw files from that month will be converted and saved in the RData folder created by the import2RData function, following the same folder structure as in the original folder path containing raw files.\nSee the example from the instrument G2201-i from Picarro for a demonstration.\n\n\n\n\n\n\n\n\nTipLoad and merge files after import\n\n\n\nIf you wish to combine saved RData files after import, use the function list.files to retrieve all files within the RData folder with the pattern “imp.RData”. Indeed, all files converted to RData with the import functions of the goFlux R package contain the pattern “imp” before the .RData extension. The argument full.names = TRUE allows for retrieval of files within sub-folders.\nThen use the function map_df to get and load all files and combine them into one data frame:\n\nall.imp &lt;- list.files(path = \"RData\", pattern = \"imp.RData\", full.names = TRUE) %&gt;%\n  map_df(~ get(load(.x)))\n\nAlternatively, use the argument merge = TRUE in the function import2Rdata to merge all saved files and assign them to an object directly.\nNote that data frames can only be merged if they contain the same columns.\n\n\n\nLI-COR\n\nLI-6400\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/LI6400\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"LI-6400\",\n             date.format = \"mdy\", prec = c(0.15, 20))\n\n\n\nLI-7810\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/LI7810\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"LI-7810\",\n             date.format = \"ymd\", prec = c(3.5, 0.6, 45))\n\n\n\nLI-7820\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/LI7820\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"LI-7820\",\n             date.format = \"ymd\", prec = c(0.4, 45))\n\n\n\nLI-8100\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/LI8100\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"LI-8100\",\n             date.format = \"ymd\", prec = c(1, 10))\n\n\n\nLI-8150 + LI-8100A automated system\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/LI8150\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"LI-8150\",\n             date.format = \"ymd\", prec = c(1, 10))\n\n\n\nLI-8200 (Smart Chamber)\nNote that with this instrument, keep_all and prec are not valid arguments.\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/LI8200\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"LI-8200\", date.format = \"ymd\")\n\n\n\nLI-8250 (Multiplexer)\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/LI8250\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"LI-8250\", date.format = \"ymd\",\n             inst1 = \"LI-7810\", gas1 = c(\"CO2_DRY\", \"CH4_DRY\", \"H2O\"),\n             prec1 = c(3.5, 0.6, 45), SWC.col = \"SWC_1\", Tsoil.col = \"TS_1\")\n\n\n\n\nLGR\n\nUGGA (GLA132 series)\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/UGGA\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"UGGA\",\n             date.format = \"dmy\", prec = c(0.2, 1.4, 50))\n\n\n\nMGGA (GLA131 series)\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/UGGA\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"UGGA\",\n             date.format = \"dmy\", prec = c(0.35, 0.9, 200))\n\n\n\nN2OM1 (GLA151 series)\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/N2OM1\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"N2OM1\",\n             date.format = \"dmy\", prec = c(0.5, 2, 50))\n\n\n\nN2Oi2 (GLA451 series)\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/N2Oi2\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"N2Oi2\",\n             date.format = \"dmy\", prec = c(0.05, 50))\n\n\n\n\nGAIA2TECH\n\nAutomated chamber ECOFlux\nNote that with this instrument, keep_all is not a valid argument. However, several other arguments can be used: active, pivot, flag, background, etc. Look up the GAIA2TECH ECOFlux instrument under the “Single file import” section for more details.\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/GAIA\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"GAIA\", date.format = \"ymd\",\n             pivot = \"long\", active = TRUE, flag = c(7,11),\n             background = FALSE,\n             CH.col = \"COM5A0\",\n             SWC.col = \"1C08_Soil Moisture\",\n             Tsoil.col = \"1C07_Soil Temperature\",\n             Tcham.col = \"2C07_Chamber Temperature\",\n             PAR.col = \"3C07_Sunlight\",\n             WTD.col = NULL,\n             Op.stat.col = \"0C06_OperatingStatus\",\n             inst1 = \"XT2C00_Instrument\",\n             inst2 = \"XT3C00_Instrument\",\n             gas1 = c(\"XT2C04_CH4\", \"XT2C05_CO2\", \"XT2C06_H2O\"),\n             gas2 = c(\"XT3C04_N2O\", \"XT3C05_H2O\"),\n             prec1 = c(0.6, 3.5, 45),\n             prec2 = c(0.4, 45))\n\n\n\nSkyline2D from Earth Bound Scientific\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/skyline\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"skyline\", date.format = \"ymd\",\n             background = FALSE,\n             CH.col = \"CH ID\",\n             CH.clo.col = \"Chamber closed\",\n             sensor1 = \"Analog Sensor1\",\n             sensor2 = \"Analog Sensor2\",\n             inst = \"Instrument\",\n             gas = c(\"CO2\", \"CH4 Dry\", \"N2O Dry\", \"H2O\"),\n             prec = c(0.24, 0.3, 5, 500))\n\n\n\n\nGasmet\n\nDX4015\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/DX4015\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"DX4015\",\n             date.format = \"ymd\", prec = c(1.6, 23, 13, 2, 23, 33))\n\n\n\nGT5000\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/GT5000\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"GT5000\",\n             date.format = \"ymd\", prec = c(1.6, 23, 13, 2, 23, 33))\n\n\n\n\nPicarro\n\nG2201-i\nThe arguments CH4, CO2, sum and range are used with the function import.G2201i only. Look up the Picarro G2201-i instrument under the “Single file import” section for more details.\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/G2201i\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"G2201i\",\n             date.format = \"ymd\", prec = c(0.2, 50, 100))\n\n\n\nG2508\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/G2508\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"G2508\",\n             date.format = \"ymd\", prec = c(0.24, 0.3, 5, 0.16, 500))\n\n\n\nG4301\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/G4301\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"G4301\",\n             date.format = \"ymd\", prec = c(0.025, 0.1, 10))\n\n\n\n\nPP-Systems\n\nEGM-5\nThe argument proc.data.field is used with the PP-Sytems EGM-5 instrument only. Look up the EGM-5 Operation Manual at page 90 for more details about the different Process Data Fields (proc.data.field), or the PP-Systems EGM-5 instrument under the “Single file import” section for more details about other arguments used with this instrument.\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/EGM5\", package = \"goFlux\")\n# The argument proc.data.field is used with the PP-System EGM-5 instrument only.\nimport2RData(path = file.path, instrument = \"EGM5\",\n             date.format = \"dmy\", prec = c(3, 1, 500), proc.data.field = 2)\n\n\n\n\nAeris Technologies\n\nMIRA Ultra CH4/ C2H6 analyzer\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/uCH4\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"uCH4\",\n             date.format = \"mdy\", prec = c(1, 0.5, 15))\n\n\n\nMIRA Ultra N2O/ CO2 analyzer\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/uN2O\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"uN2O\",\n             date.format = \"mdy\", prec = c(0.2, 0.2, 15))\n\n\n\n\nHealthy Photon\n\nHT8850 all-in-one GHG analyzer\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/HT8850\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"HT8850\",\n             date.format = \"ymd\", prec = c(0.5, 3, 0.5, 10))\n\n\n\n\nGasmetPD\n\nCustom made multiplexer linked with the Gasmet DX4015\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata/GasmetPD\", package = \"goFlux\")\nimport2RData(path = file.path, instrument = \"GasmetPD\",\n             gas = c(\"CO2_ppm\", \"CH4_ppm\", \"N2O_ppm\", \"NH3_ppm\", \"H2O_pct\"),\n             date.format = \"ymd\", prec = c(1.6, 13, 2, 23, 33))",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-LICOR",
    "href": "import.html#sec-single-LICOR",
    "title": "Import raw data",
    "section": "LI-COR",
    "text": "LI-COR\n\nLI-6400\nImport single raw gas measurement files from the LI-COR 6400 (CO2 and H2O GHG analyzer) with the function import.LI6400.\n\nUsage\n\nimport.LI6400(\n  inputfile,\n  date.format = \"mdy\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.15, 20)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “mdy”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm” and H2O_ppm”. The default is prec = c(0.15, 20).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument LI-6400, the date is found in one of the first lines in a format containing abbreviations, for example “Thr Aug 6 2020”, which would be the date format “mdy”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2\nmmol/mol for H2O\nkPa for pressure\ncm3 for volumes\nCelsius for temperature\nµmol photons m-2s-1 for PAR\n\nIf your LI-COR LI-6400 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones provided by the manufacturer upon request, for the latest model of this instrument available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"LI6400/LI6400.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.LI6400 &lt;- import.LI6400(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.LI6400(inputfile = file.path, save = TRUE)\n\n\n\n\nLI-7810\nImport single raw gas measurement files from the LI-COR 7810 (CO2, CH4 and H2O GHG analyzer) with the function import.LI7810.\n\nUsage\n\nimport.LI7810(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(3.5, 0.6, 45)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .data\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, CH4dry_ppb” and H2O_ppm”. The default is prec = c(3.5, 0.6, 45).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument LI-7810, the date is found in the column “DATE”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2 and H2O\nppb for CH4\nkPa for pressure\nCelsius for temperature\n\nIf your LI-COR LI-7810 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"LI7810/LI7810.data\", package = \"goFlux\")\n\n# Import in the environment\nimp.LI7810 &lt;- import.LI7810(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.LI7810(inputfile = file.path, save = TRUE)\n\n\n\n\nLI-7820\nImport single raw gas measurement files from the LI-COR 7820 (N2O and H2O GHG analyzer) with the function import.LI7820.\n\nUsage\n\nimport.LI7820(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.4, 45)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .data\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “N2Odry_ppb” and H2O_ppm”. The default is prec = c(0.4, 45).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument LI-7820, the date is found in the column “DATE”.\nNote that this function was designed for the following units in the raw file:\n\nppb for N2O\nppm for H2O\nkPa for pressure\nCelsius for temperature\n\nIf your LI-COR LI-7820 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for H2O, or 1 ppb for N2O) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"LI7820/LI7820.data\", package = \"goFlux\")\n\n# Import in the environment\nimp.LI7820 &lt;- import.LI7820(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.LI7820(inputfile = file.path, save = TRUE)\n\n\n\n\nLI-8100\nImport single raw gas measurement files from the LI-COR 8100 (CO2 and H2O GHG analyzer) with the function import.LI8100.\n\nUsage\n\nimport.LI8100(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(1, 10)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .81x\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm” and H2O_ppm”. The default is prec = c(1, 10).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument LI-8100, the date is found in the column “Date”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2\nmmol/mol for H2O\nCelsius for temperature\n\nIf your LI-COR LI-8100 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones provided by the manufacturer upon request, for the latest model of this instrument available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"LI8100/LI8100.81x\", package = \"goFlux\")\n\n# Import in the environment\nimp.LI8100 &lt;- import.LI8100(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.LI8100(inputfile = file.path, save = TRUE)\n\n\n\n\nLI-8150 + LI-8100A\nImport single raw gas measurement files from the LI-COR Multiplexer LI-8150 connected with up to 16 chambers and the LI-8100A gas analyzer (CO2 and H2O) with the function import.LI8150.\n\nUsage\n\nimport.LI8150(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(1, 10)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .81x\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm” and H2O_ppm”. The default is prec = c(1, 10).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument LI-8100A, the date is found in the column “Date”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2\nmmol/mol for H2O\nCelsius for temperature\n\nIf your LI-COR LI-8100A uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (01-2026).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"LI8150/LI8150.81x\", package = \"goFlux\")\n\n# Import in the environment\nimp.LI8150 &lt;- import.LI8150(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.LI8150(inputfile = file.path, save = TRUE)\n\n\n\n\nLI-8200 (Smart Chamber)\nImport single raw data files from the LI-COR smart chamber (LI-8200) with the function import.LI8200.\n\nUsage\n\nimport.LI8200(inputfile, date.format = \"ymd\", timezone = \"UTC\", save = FALSE)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .json\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument LI-8200, the date is found under one of the measurements, next to ‘“Date”:’.\nNote that this function was designed for the following units in the raw file:\n\nseconds for DeadBand\ncm for Area and Offset\nmmol/mol for H2O\nlitters for volumes\nkPa for pressure\nCelsius for temperature\n\nIf your Smart Chamber uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nIn addition, soil temperature and moisture are read with a HydraProbe connected to the Smart Chamber. If you are using a different setup, please contact the maintainer of this package for support.\nAs opposed to the other import functions, there is no option to “keep_all” with the Smart Chamber. If you would like to import additional data using this function, please contact the maintainer of this package for support.\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"LI8200/LI8200.json\", package = \"goFlux\")\n\n# Import in the environment\nimp.LI8200 &lt;- import.LI8200(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.LI8200(inputfile = file.path, save = TRUE)\n\n\n\n\nLI-8250 (Multiplexer)\nImport single raw data files from the LI-COR Multiplexer (LI-8250) with the function import.LI8250.\n\nUsage\n\nimport.LI8250(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  inst1,\n  inst2 = NULL,\n  gas1,\n  gas2 = NULL,\n  prec1,\n  prec2 = NULL,\n  dry1 = T,\n  dry2 = T,\n  SWC.col,\n  Tsoil.col\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .82z\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\ninst1, inst2\ncharacter strings; a pattern to match the columns containing the name of each instrument. For example, with a LI-COR LI-7810, inst1 = \"LI-7810\" and inst2 = NULL, which matches the example data file provided with the package.\n\n\ngas1, gas2\ncharacter vectors; a pattern to match the columns containing each gas measurement. For example, with a LI-COR LI-7810 gas1 = c(\"CO2_DRY\", \"CH4_DRY\", \"H2O\") and gas2 = NULL, which matches the example data file provided with the package.\n\n\nprec1, prec2\nnumerical vectors; the precision of the instrument for each gas mentioned in gas1 and gas2. For example, with a LI-COR LI-7810, prec1 = c(3.5, 0.6, 45) and prec2 = NULL, which matches the example data file provided with the package. Note that the order in the arguments precX must match the order of the arguments in gasX.\n\n\ndry1, dry2\nlogical; are the gas measurements compensated for water vapor (dry fraction)? If dryX = TRUE (default), the gases are compensated for water vapor, and will be named accordingly. For example, the column “CO2_DRY” will become “CO2dry_ppm”.\n\n\nTsoil.col, SWC.col\ncharacter string; a pattern to match the columns that fit the corresponding parameter.\n\n\n\n\n\nDetails\nFiles with the format .82z are zip archives that include all measurements that occurred at a given port for one observation. Each .82z file includes two files: a data.csv file and a metadata.json file. Raw files names for .82z files are formatted with the instrument serial number and a time stamp (serial-number-YYYYMMDDHHMMSS.82z). In date.format, the date format refers to the date format in the file name. Alternatively, the date format can be found in the data.csv file extracted from the .82z file, under the column “Date”.\nNote that this function was designed for the following units in the raw file, according to the data dictionary of the LI-8250 Multiplexer online.\n\n% v/v for soil water content (SWC)\nlitters for volumes\nkPa for pressure\nCelsius for temperature\n\nFor each gas, the units are taken from the third row in the data.csv file. Currently, the function is adapted for use with LI-COR instruments (LI-870 CO2/ H2O Analyzer or LI-78xx Trace Gas Analyzers). If you are using the function with a non-LI-COR instrument, please contact the maintainer of this package for support.\nRegarding the parameters dryX, in case of uncertainty, either contact your technical support or assume that gases are compensated for water vapor, which is normally the case.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2, or 1 ppb for CH4) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved.\nAccording to the data dictionary of the LI-8250 Multiplexer online, the column STATE indicates the chamber state, where, for example, 1 = closing and 5 = closed.\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"LI8250/LI8250.82z\", package = \"goFlux\")\n\n# Import in the environment\nimp.LI8250 &lt;- import.LI8250(inputfile = file.path, inst1 = \"LI-7810\",\n                            gas1 = c(\"CO2_DRY\", \"CH4_DRY\", \"H2O\"),\n                            prec1 = c(3.5, 0.6, 45), SWC.col = \"SWC_1\",\n                            Tsoil.col = \"TS_1\")\n\n# Or save in a RData folder in the working directory\nimport.LI8250(inputfile = file.path, save = TRUE, inst1 = \"LI-7810\",\n              gas1 = c(\"CO2_DRY\", \"CH4_DRY\", \"H2O\"),\n              prec1 = c(3.5, 0.6, 45), SWC.col = \"SWC_1\",\n              Tsoil.col = \"TS_1\")",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-LGR",
    "href": "import.html#sec-single-LGR",
    "title": "Import raw data",
    "section": "LGR",
    "text": "LGR\n\nUGGA and MGGA\nImport single raw gas measurement files from the ultra-portable GHG analyzers (GLA132-UGGA and GLA131-MGGA) from Los Gatos Research (CO2, CH4 and H2O) with the function import.UGGA.\n\nUsage\n\nimport.UGGA(\n  inputfile,\n  date.format = \"dmy\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.2, 1.4, 50)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “dmy”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, CH4dry_ppb” and H2O_ppm”. The default is prec = c(0.2, 1.4, 50), which corresponds to the ultra-portable GGA (GLA132 series). For the micro ultra-portable GGA (GLA131 series), use prec = c(0.35, 0.9, 200).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For these instruments, the date is found in the column “Time”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2, CH4 and H2O\nTorr for pressure\nCelsius for temperature\n\nIf your LGR instrument (UGGA or MGGA) uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (11-2023).\n\n\nExamples\n\nUGGA (GLA132 series)\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"UGGA/UGGA.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.UGGA &lt;- import.UGGA(inputfile = file.path, prec = c(0.2, 1.4, 50))\n\n# Or save in a RData folder in the working directory\nimport.UGGA(inputfile = file.path, prec = c(0.2, 1.4, 50), save = TRUE)\n\n\n\nMGGA (GLA131 series)\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"UGGA/UGGA.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.MGGA &lt;- import.UGGA(inputfile = file.path, prec = c(0.35, 0.9, 200))\n\n# Or save in a RData folder in the working directory\nimport.UGGA(inputfile = file.path, prec = c(0.35, 0.9, 200), save = TRUE)\n\n\n\n\n\nN2OM1\nImport single raw gas measurement files from the N2OM1 GHG analyzers (GLA151 series) from Los Gatos Research (N2O, CH4 and H2O) with the function import.N2OM1.\n\nUsage\n\nimport.N2OM1(\n  inputfile,\n  date.format = \"dmy\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.5, 2, 50)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “dmy”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “N2Odry_ppb”, CH4dry_ppb” and H2O_ppm”. The default is prec = c(0.5, 2, 50).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument N2OM1, the date is found in the column “Time”.\nNote that this function was designed for the following units in the raw file:\n\nppm for N2O, CH4 and H2O\nTorr for pressure\nCelsius for temperature\n\nIf your LGR N2OM1 instrument uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for H2O, or 1 ppb for N2O and CH4) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (12-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"N2OM1/N2OM1.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.N2OM1 &lt;- import.N2OM1(inputfile = file.path, prec = c(0.5, 2, 50))\n\n# Or save in a RData folder in the working directory\nimport.N2OM1(inputfile = file.path, prec = c(0.5, 2, 50), save = TRUE)\n\n\n\n\nN2Oi2\nImport single raw gas measurement files from the Isotopic N2O analyzer (GLA451 series) from Los Gatos Research (N2O and site-specific isotopic ratios of N and O) with the function import.N2Oi2.\n\nUsage\n\nimport.N2Oi2(\n  inputfile,\n  date.format = \"dmy\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.05, 50)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “dmy”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “N2Odry_ppb”, and “H2O_ppm”. The default is prec = c(0.05, 50).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument N2OM1, the date is found in the column “Time”.\nNote that this function was designed for the following units in the raw file:\n\nppm for N2O and H2O\nTorr for pressure\nCelsius for temperature\n\nIf your LGR N2Oi2 instrument uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for H2O, or 1 ppb for N2O) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (06-2025).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"N2Oi2/N2Oi2.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.N2Oi2 &lt;- import.N2Oi2(inputfile = file.path, prec = c(0.05, 50))\n\n# Or save in a RData folder in the working directory\nimport.N2Oi2(inputfile = file.path, prec = c(0.05, 50), save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-GAIA",
    "href": "import.html#sec-single-GAIA",
    "title": "Import raw data",
    "section": "GAIA2TECH",
    "text": "GAIA2TECH\n\nAutomated chamber ECOFlux\nWith the function import.GAIA, import single raw gas measurement files from the automated chamber ECOFlux (GAIA2TECH) linked with up to three gas analyzers. Default settings are set for two LI-COR instruments: LI-7810 (CO2, CH4 and H2O) and LI7820 (N2O and H2O), to match the example data file provided with the package.\n\nUsage\n\nimport.GAIA(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  pivot = \"long\",\n  active = TRUE,\n  flag = c(7, 11),\n  background = FALSE,\n  save = FALSE,\n  CH.col = \"COM5A0\",\n  SWC.col = \"1C08_Soil Moisture\",\n  Tsoil.col = \"1C07_Soil Temperature\",\n  Tcham.col = \"2C07_Chamber Temperature\",\n  PAR.col = \"3C07_Sunlight\",\n  WTD.col = NULL,\n  Op.stat.col = \"0C06_OperatingStatus\",\n  inst1 = \"XT2C00_Instrument\",\n  inst2 = \"XT3C00_Instrument\",\n  inst3 = NULL,\n  gas1 = c(\"XT2C04_CH4\", \"XT2C05_CO2\", \"XT2C06_H2O\"),\n  gas2 = c(\"XT3C04_N2O\", \"XT3C05_H2O\"),\n  gas3 = NULL,\n  prec1 = c(0.6, 3.5, 45),\n  prec2 = c(0.4, 45),\n  prec3 = NULL,\n  dry1 = T,\n  dry2 = T,\n  dry3 = NULL,\n  manual = FALSE,\n  sep = \"\\t\",\n  skip = 1\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .csv\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\npivot\ncharacter string; either “long” or “wide”. If pivot = \"long\", each column containing information about Tsoil, Tcham, SWC, PAR and operating status (Op.stat) will be saved in a single column per parameter. If pivot = \"wide\", the default display of one column per chamber per parameter will be used.\n\n\nactive\nlogical; if active = TRUE, preserve data for active chambers only.\n\n\nflag\nnumeric vector; indicates the operating status that should be used for the flux calculation. Default is flag = c(7,11), where 7 indicates “Chamber Idle Closed Clear” and 11 indicates “Chamber Idle Closed Dark”.\n\n\nbackground\nlogical; if background = FALSE, removes all data from activ.cham == \"Background\".\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nPAR.col, Tcham.col, Tsoil.col, SWC.col, WTD.col\ncharacter vector; a vector of patterns to match all columns that fit the corresponding parameters. See details below for more information.\n\n\nOp.stat.col, CH.col\ncharacter string; a pattern to match columns that fit the corresponding parameters: see details below.\n\n\ninst1, inst2, inst3\ncharacter strings; a pattern to match the columns containing the name of each instrument. By default, inst1 = \"XT2C00_Instrument\", inst2 = \"XT3C00_Instrument\", and inst3 = NULL, to match the example data file provided with the package.\n\n\ngas1, gas2, gas3\ncharacter vectors; a pattern to match the columns containing each gas measurement. By default, gas1 = c(\"XT2C04_CH4\", \"XT2C05_CO2\", \"XT2C06_H2O\"), gas2 = c(\"XT3C04_N2O\", \"XT3C05_H2O\"), and gas3 = NULL, to match the example data file provided with the package.\n\n\nprec1, prec2, prec3\nnumerical vectors; the precision of the instrument for each gas mentioned in gas1, gas2 and gas3. By default, prec1 = c(0.6, 3.5, 45), prec2 = c(0.4, 45), and prec3 = NULL, to match the example data file provided with the package. Note that the order in the arguments precX must match the order of the arguments in gasX.\n\n\ndry1, dry2, dry3\nlogical; are the gas measurements compensated for water vapor (dry fraction)? If dryX = TRUE (default), the gases are compensated for water vapor, and will be named accordingly. For example, the column “XT2C05_CO2” will become “CO2dry_ppm”.\n\n\nmanual\nlogical; indicates if measurements were made manually and there are no records of chamber identification, sequence, etc. If TRUE, the arguments Op.stat.col, CH.col, active, background, flag, and pivot are ignored.\n\n\nsep\ncharacter string defining the field separator character. Values on each line of the file are separated by this character. By default, sep = \"\\t\" for tabulation.\n\n\nskip\ninteger; the number of lines of the data file to skip before beginning to read data. By default, skip = 1.\n\n\n\n\n\nDetails\nThis function has been designed for the automated chamber ECOFlux (GAIA2TECH) synced with up to 9 chambers and two GHG analyzers from LI-COR (LI-7810: CO2, CH4 and H2O / LI7820: N2O and H2O). If this function could be useful for you, but does not meet your needs, please contact the maintainer of this package for potential adaptations.\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument GAIA the date is found in the column “Titles:”.\nThe arguments PAR.col, Tcham.col, Tsoil.col, SWC.col, and WTD.col correspond to different types of probes linked to the ECOFlux chamber: PAR (sunlight), chamber temperature, soil temperature, soil water content and water table depth, respectively. All columns containing the patterns specified in these arguments will be selected and renamed with the corresponding argument. For example, if PAR = \"3C07_Sunlight\", all columns containing the pattern “3C07_Sunlight” will be renamed with the pattern “_PAR”. Then, if pivot = \"long\", all columns with the pattern “_PAR” will be merged together. If PAR = c(\"3C07_Sunlight1\", \"3C07_Sunlight2\"), these patterns will be renamed to PAR1 and PAR2.\nThe argument Op.stat.col corresponds to the columns Operating Status of each chamber. The argument CH.col indicates a character string preceding the chamber number for each column of the raw data. For example, the column “COM5A010C06_OperatingStatus” in the raw data file contains the Operating Status for the chamber 1 if CH.col = \"COM5A0\" and Op.stat.col = \"0C06_OperatingStatus\". If these columns are absent from the raw data, set arguments to NULL.\nNote that this function was designed for the following units in the raw file:\n\nkPa for pressure\nvolumetric water content (%) for soil moisture\nCelsius for air temperature\nµmol photons m-2s-1 for PAR\n\nFor each gas, the units are taken from the second row in the raw file (Units:). If your instruments use different units, either convert the units after import, change the settings on your instruments, or contact the maintainer of this package for support.\nRegarding the parameters dryX, in case of uncertainty, either contact your technical support or assume that gases are compensated for water vapor, which is normally the case.\nAs opposed to the other import functions, there is no option to “keep_all” with this instrument. If you would like to import additional data using this function, please contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4 and N2O) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest models of the LI-7810 and LI-7820, available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"GAIA/GAIA.csv\", package = \"goFlux\")\n\n# Import in the environment\nimp.GAIA &lt;- import.GAIA(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.GAIA(inputfile = file.path, save = TRUE)\n\n\n\n\nSkyLine2D from Earth Bound Scientific\nImports single raw gas measurement files from the SkyLine2D system from Earth Bound Scientific from the datalog file created by GAIA2TECH. Default settings are set for the Picarro G2508 (CO2, CH4, N2O and H2O), to match the example data file provided with the package.\n\nUsage\n\nimport.skyline(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  background = FALSE,\n  CH.col = \"CH ID\",\n  CH.clo.col = \"Chamber closed\",\n  sensor1 = \"Analog Sensor1\",\n  sensor2 = \"Analog Sensor2\",\n  inst = \"Instrument\",\n  gas = c(\"CO2\", \"CH4 Dry\", \"N2O Dry\", \"H2O\"),\n  prec = c(0.24, 0.3, 5, 500),\n  dry = T\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .csv\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nbackground\nlogical; if background = FALSE, removes all data from the opened chamber.\n\n\nCH.clo.col, CH.col\ncharacter string; a pattern to match columns that fit the corresponding parameters: CH.col = \"CH ID\" and CH.clo.col = \"Chamber closed\".\n\n\nsensor1, sensor2\ncharacter strings; a pattern to match the columns containing the name of each sensor. By default, sensor1 = \"Analog Sensor1\", sensor2 = \"Analog Sensor2\", to match the example data file provided with the package. Set to NULL to ignore these columns.\n\n\ninst\ncharacter string; a pattern to match the column containing the name of the GHG analyzer: inst = \"Instrument\".\n\n\ngas\ncharacter vector; a pattern to match the columns containing each gas measurement. By default, gas = c(\"CO2\", \"CH4 Dry\", \"N2O Dry\", \"H2O\"), to match the example data file provided with the package.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas mentioned in gas. By default, prec = c(0.24, 0.3, 5, 500), to match the example data file provided with the package. Note that the order in the arguments prec must match the order of the arguments in gas.\n\n\ndry\nlogical; are the gas measurements compensated for water vapor (dry fraction)? If dry = TRUE (default), the gases are already compensated for water vapor. Otherwise, the gases will be converted to a dry fraction.\n\n\n\n\n\nDetails\nThis function has been designed for the SkyLine2D system file generated by GAIA2TECH synced with the Picarro G2508 (CO2, CH4, N2O and H2O)). If this function could be useful for you, but does not meet your needs, please contact the maintainer of this package for potential adaptations.\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the SkyLine2D system, the date is found in the column “Titles:”. Be mindful that when you open a .csv file in Excel, the software often changes date formats. To avoid any discrepancy, open the file in a text file.\nThe argument CH.clo.col corresponds to the column “Chamber closed”. Any number above 0 in that column indicate that the chamber is closed. The argument CH.col corresponds to the column “CH ID” indicating which chamber is active.\nFor each gas, the units are taken from the second row in the raw file (Units:). If your instrument uses different units, either convert the units after import, change the settings on your instruments, or contact the maintainer of this package for support.\nRegarding the parameters dry, in case of uncertainty, either contact your technical support or assume that gases are compensated for water vapor, which is normally the case.\nAs opposed to the other import functions, there is no option to “keep_all” with this instrument. If you would like to import additional data using this function, please contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4 and N2O) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest models of the Picarro G2508, available at the time of the creation of this function (10-2025).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"skyline/skyline.csv\", package = \"goFlux\")\n\n# Import in the environment\nimp.skyline &lt;- import.skyline(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.skyline(inputfile = file.path, save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-Gasmet",
    "href": "import.html#sec-single-Gasmet",
    "title": "Import raw data",
    "section": "Gasmet",
    "text": "Gasmet\n\nDX4015\nImport single raw gas measurement files from the Gasmet DX4015 gas analyzer (CO, CO2, CH4, N2O, NH3 and H2O) with the function import.DX4015.\n\nUsage\n\nimport.DX4015(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(1.6, 23, 13, 2, 23, 33)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .TXT\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, “COdry_ppb”, CH4dry_ppb”, “N2Odry_ppb”, “NH3dry_ppb” and H2O_ppm”. The default is prec = c(1.6, 23, 13, 2, 23, 33).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument DX4015, the date is found in the column “Date”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2, CO, CH4, N2O and NH3\nvol-% for H2O\nmbar for pressure\nCelsius for temperature\n\nIf your Gasmet DX4015 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4, CO N2O and NH3) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones provided by the manufacturer upon request, for the latest model of this instrument available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"DX4015/DX4015.TXT\", package = \"goFlux\")\n\n# Import in the environment\nimp.DX4015 &lt;- import.DX4015(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.DX4015(inputfile = file.path, save = TRUE)\n\n\n\n\nGT5000\nImport single raw gas measurement files from the Gasmet GT5000 gas analyzer (CO, CO2, CH4, N2O, NH3 and H2O) with the function import.GT5000.\n\nUsage\n\nimport.GT5000(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(1.6, 23, 13, 2, 23, 33)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .TXT\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, “COdry_ppb”, “CH4dry_ppb”, “N2Odry_ppb”, “NH3dry_ppb” and “H2O_ppm”. The default is prec = c(1.6, 23, 13, 2, 23, 33).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument GT5000, the date is found in the column “Date”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2, CO, CH4, N2O and NH3\nvol-% for H2O\nmbar for pressure\nCelsius for temperature\n\nIf your Gasmet GT5000 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4, CO N2O and NH3) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones provided by the manufacturer upon request, for the latest model of this instrument available at the time of the creation of this function (08-2024).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"GT5000/GT5000.TXT\", package = \"goFlux\")\n\n# Import in the environment\nimp.GT5000 &lt;- import.GT5000(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.GT5000(inputfile = file.path, save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-Picarro",
    "href": "import.html#sec-single-Picarro",
    "title": "Import raw data",
    "section": "Picarro",
    "text": "Picarro\n\nG2201-i\nImport single raw gas measurement files from the Picarro G2201-i (CO2 and CH4 isotopic analyzer) with the function import.G2201i.\n\nUsage\n\nimport.G2201i(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.2, 50, 100),\n  CH4 = \"HP_12CH4_dry\",\n  CO2 = \"12CO2_dry\",\n  sum = TRUE,\n  range = 10\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .dat\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, “CH4dry_ppb” and “H2O_ppm”. The default is prec = c(0.2, 50, 100).\n\n\nCH4\ncharacter string; which column should be used for CH4 concentration. By default, CH4 = \"HP_12CH4_dry\".\n\n\nCO2\ncharacter string; which column should be used for CO2 concentration. By default, CO2 = \"12CO2_dry\".\n\n\nsum\nlogical; if sum = TRUE (default), the arguments CH4 and CO2 are ignored and, instead, both fractions (carbon isotope 12 and 13) of each gas, are summed after correction for water vapor, to obtain the total gas concentration. See the argument range for the selection between the HP or the HR measurement of CH4 concentration.\n\n\nrange\nnumerical value; at which threshold should the function select between high precision (HP) and high resolution (HR) of CH4 concentration? The default is range = 10. If the methane concentration recorded in the column HP_12CH4_dry is above 10 ppm, the concentration from the columns HR_12CH4_dry and HR_13CH4 are used for the sum instead of HP.\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument G2201-i, the date is found in the column “DATE”.\nThe arguments CH4 and CO2 require the user to specify which columns contain the two gases of interest among the following for CH4:\n\nHP_12CH4\nHP_12CH4_dry\nHP_13CH4\nHR_12CH4\nHR_12CH4_dry\nHR_13CH4\n\nAnd among the following for CO2:\n\n12CO2\n12CO2_dry\n13CO2\n13CO2_dry\n\nNote that, HP stands for CH4 concentration measured with strong line for high precision but limited range and HR stands for CH4 concentration measured with high range (between 10 and 1000 ppm). In addition, _dry stands for dry mole fraction of gases, corrected for water vapor. Finally, 12 and 13 indicate each carbon isotope contained in each gas. If one selects one of the non-dry mole fraction, it will be corrected for water vapor during the import process.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2 and CH4\npercent (%) for H2O\nTorr for pressure\nCelsius for temperature\n\nIf your Picarro G2201-i uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument, available at the time of the creation of this function (05-2025).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"G2201i/2025/05/13/G2201i.dat\", package = \"goFlux\")\n\n# Import in the environment\nimp.G2201i &lt;- import.G2201i(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.G2201i(inputfile = file.path, save = TRUE)\n\n\n\n\nG2508\nImport single raw gas measurement files from the Picarro G2508 (CO2, CH4, N2O, NH3, and H2O GHG analyzer) with the function import.G2508.\n\nUsage\n\nimport.G2508(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.24, 0.3, 5, 0.16, 500)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .dat\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, CH4dry_ppb”, “N2Odry_ppb”, “NH3dry_ppb” and H2O_ppm”. The default is prec = c(0.24, 0.3, 5, 0.16, 500).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument G2508, the date is found in the column “DATE”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2\nppb for CH4, N2O and NH3\nmmol/mol for H2O\nTorr for pressure\nCelsius for temperature\n\nIf your Picarro G2508 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4, N2O and NH3) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument, available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"G2508/2022/08/01/G2508.dat\", package = \"goFlux\")\n\n# Import in the environment\nimp.G2508 &lt;- import.G2508(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.G2508(inputfile = file.path, save = TRUE)\n\n\n\n\nG4301\nImport single raw gas measurement files from the Picarro G4301 (CO2, CH4 and H2O GHG analyzer) with the function import.G4301.\n\nUsage\n\nimport.G4301(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.025, 0.1, 10)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .dat\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, CH4dry_ppb” and H2O_ppm”. The default is prec = c(0.025, 0.1, 10).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument G4301, the date is found in the column “DATE”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2\nppb for CH4\nmmol/mol for H2O\nTorr for pressure\nCelsius for temperature\n\nIf your Picarro G4301 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument, available at the time of the creation of this function (11-2023).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"G4301/G4301.dat\", package = \"goFlux\")\n\n# Import in the environment\nimp.G4301 &lt;- import.G4301(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.G4301(inputfile = file.path, save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-PP-System",
    "href": "import.html#sec-single-PP-System",
    "title": "Import raw data",
    "section": "PP-Systems",
    "text": "PP-Systems\n\nEGM-5\nImport single raw gas measurement files from the PP-Systems EGM-5 Portable CO2 Gas Analyzer, with the function import.EGM5.\n\nUsage\n\nimport.EGM5(\n  inputfile,\n  date.format = \"dmy\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(3, 1, 500),\n  proc.data.field = NULL\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .TXT\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “dmy”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, “O2dry_pct” and H2O_ppm”. The default is prec = c(3, 1, 500).\n\n\nproc.data.field\nnumeric value; select the process data field used with the EGM-5. There are 5 different modes available: (1) Measure mode; (2) SRC or Custom mode; (3) CPY mode; (4) Injection mode; or (5) Static mode. If no value is specified, the parameters will be named “param1”, “param2”, “param3”, “param4” and “param5”.\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For the instrument EGM5, the date is found in the column “Date”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2\n% for O2 (pct)\nmb for H2O\nmb for pressure\nCelsius for temperature\n\nIf your PP-Systems EGM-5 uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1% for O2) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones provided by the manufacturer upon request, for the latest model of this instrument available at the time of the creation of this function (11-2023).\nLook up the EGM-5 Operation Manual at page 90 for more details about the different Process Data Fields (proc.data.field).\nNote that the default file extension for this instrument is .TXT, however, it is also possible to use with a .csv file format.\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"EGM5/EGM5.TXT\", package = \"goFlux\")\n\n# Import in the environment\nimp.EGM5 &lt;- import.EGM5(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.EGM5(inputfile = file.path, save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-Aeris",
    "href": "import.html#sec-single-Aeris",
    "title": "Import raw data",
    "section": "Aeris Technologies",
    "text": "Aeris Technologies\n\nMIRA Ultra CH4/ C2H6 analyzer\nImport single raw data files from the MIRA Ultra CH4/ C2H6 Natural Gas Leak Detection System (with GPS) from Aeris Technologies with the function import.uCH4.\n\nUsage\n\nimport.uCH4(\n  inputfile,\n  date.format = \"mdy\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(1, 0.5, 15)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “mdy”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CH4_ppb”, “C2H6dry_ppb” and “H2O_ppm”. The default is prec = c(1, 0.5, 15). The precision for water vapor is currently unknown, and a default of 1 ppm is used.\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For these instruments, the date is found in the column “Time Stamp”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CH4 and H2O\nppb for C2H6\nmbars for pressure\nCelsius for temperature\n\nIf your Aeris instrument (MIRA Ultra CH4/ C2H6 analyzer) uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for C2H6 and CH4, or 1 ppb for H2O) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (01-2024). The precision for water vapor is currently unknown, and a default of 1 ppm is used.\n\n\nExamples\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"uCH4/uCH4.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.uCH4 &lt;- import.uCH4(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.uCH4(inputfile = file.path, save = TRUE)\n\n\n\n\nMIRA Ultra N2O/ CO2 analyzer\nImport single raw data files from the MIRA Ultra N2O/ CO2 High Accuracy Analyzer (with GPS) from Aeris Technologies with the function import.uN2O.\n\nUsage\n\nimport.uN2O(\n  inputfile,\n  date.format = \"mdy\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  prec = c(0.2, 0.2, 15)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “mdy”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, “N2O_ppb” and “H2O_ppm”. The default is prec = c(0.2, 0.2, 15).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For these instruments, the date is found in the column “Time Stamp”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2, N2O and H2O\nmbars for pressure\nCelsius for temperature\n\nIf your Aeris instrument (MIRA Ultra N2O/ CO2 analyzer) uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and N2O, or 1 ppb for H2O) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (01-2024). The precision for water vapor is currently unknown, and a default of 1 ppm is used.\n\n\nExamples\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"uN2O/uN2O.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.uN2O &lt;- import.uN2O(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.uN2O(inputfile = file.path, save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-HealthyPhoton",
    "href": "import.html#sec-single-HealthyPhoton",
    "title": "Import raw data",
    "section": "Healthy Photon",
    "text": "Healthy Photon\n\nHT8850 all-in-one GHG analyzer\nImports single raw gas measurement files from the all-in-one GHG analyzer HT8850 from Healthy Photon (CO2, CH4, N2O and H2O)\n\nUsage\n\nimport.HT8850(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  prec = c(0.5, 3, 0.5, 10)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas, in the following order: “CO2dry_ppm”, “CH4dry_ppb”, “N2O_ppb” and “H2O_ppm”. The default is prec = c(0.5, 3, 0.5, 10).\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For this instrument, the date is found in the column “time”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2, CH4 and H2O\nppb for N2O\n\nIf your instrument uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4 and N2O) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones found online for the latest model of this instrument available at the time of the creation of this function (01-2026).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"HT8850/HT8850.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.HT8850 &lt;- import.HT8850(inputfile = file.path)\n\n# Or save in a RData folder in the working directory\nimport.HT8850(inputfile = file.path, save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "import.html#sec-single-GasmetPD",
    "href": "import.html#sec-single-GasmetPD",
    "title": "Import raw data",
    "section": "GasmetPD",
    "text": "GasmetPD\n\nCustom made multiplexer linked with the Gasmet DX4015\nImports single raw gas measurement files from the GasmetPD, a custom made multiplexer linked with the Gasmet DX4015 (CO2, CH4, N2O, NO2, NO, NH3 and H2O)\n\nUsage\n\nimport.GasmetPD(\n  inputfile,\n  date.format = \"ymd\",\n  timezone = \"UTC\",\n  save = FALSE,\n  keep_all = FALSE,\n  gas = c(\"CO2_ppm\", \"CH4_ppm\", \"N2O_ppm\", \"NH3_ppm\", \"H2O_pct\"),\n  prec = c(1.6, 13, 2, 23, 33)\n)\n\n\n\nArguments\n\n\n\n\n\n\n\ninputfile\ncharacter string; the name of a file with the extension .txt\n\n\ndate.format\ncharacter string; specifies the date format found in the raw data file. Choose one of the following: “dmy”, “ymd”, or “mdy”. Default is “ymd”, as it is the date format from the example data file provided.\n\n\ntimezone\ncharacter string; a time zone in which to import the data to POSIXct format. Default is “UTC”. Note about time zone: it is recommended to use the time zone “UTC” to avoid any issue related to summer time and winter time changes.\n\n\nsave\nlogical; if save = TRUE, saves the file as an .RData file in a RData folder in the current working directory. If save = FALSE, returns the file in the Console, or load in the Environment if assigned to an object.\n\n\nkeep_all\nlogical; if keep_all = TRUE, keep all columns from the raw file. The default is keep_all = FALSE, and columns that are not necessary for gas flux calculation are removed.\n\n\ngas\ncharacter vector; a pattern to match the columns containing each gas measurement. Choose from: “CO2dry_ppm”, “CH4dry_ppb”, “N2Odry_ppb”, “NH3dry_ppb”, “NO2_ppm”, “NO_ppm” and “H2O_ppm”.\n\n\nprec\nnumerical vector; the precision of the instrument for each gas. Note that the order in the arguments prec must match the order of the arguments in gas.\n\n\n\n\n\nDetails\nIn date.format, the date format refers to a date found in the raw data file, not the date format in the file name. For this instrument, the date is found in the column “Date”.\nNote that this function was designed for the following units in the raw file:\n\nppm for CO2, CH4, N2O and NH3\npercent (%) for H2O\nmbar for pressure\n\nThe function converts ambient pressure to kPa (Pcham), water vapor to ppm, and CH4, N2O and NH3 to ppb. If your instrument uses different units, either convert the units after import, change the settings on your instrument, or contact the maintainer of this package for support.\nThe precision of the instrument is needed to restrict kappa-max (k.max) in the non-linear flux calculation (HM.flux). Kappa-max is inversely proportional to instrument precision. If the precision of your instrument is unknown, it is better to use a low value (e.g. 1 ppm for CO2 and H2O, or 1 ppb for CH4, N2O and NH3) to allow for more curvature, especially for water vapor fluxes, or very long measurements, that are normally curved. The default values given for instrument precision are the ones provided by the manufacturer upon request, for the latest model of this instrument available at the time of the creation of this function (07-2024).\n\n\nExample\n\n# Retrieve file path from example file in the goFlux package\n# using the function system.file\nfile.path &lt;- system.file(\"extdata\", \"GasmetPD/GasmetPD.txt\", package = \"goFlux\")\n\n# Import in the environment\nimp.GasmetPD &lt;- import.GasmetPD(inputfile = file.path, prec = c(1.6, 13, 2, 23, 33))\n\n# Or save in a RData folder in the working directory\nimport.GasmetPD(inputfile = file.path, prec = c(1.6, 13, 2, 23, 33), save = TRUE)",
    "crumbs": [
      "Import"
    ]
  },
  {
    "objectID": "install.html",
    "href": "install.html",
    "title": "Installation",
    "section": "",
    "text": "To work with the goFlux package, you’ll need to install R and RStudio. Both programs are free and easy to download. For an easy step by step, follow the procedure described here.",
    "crumbs": [
      "Installation"
    ]
  },
  {
    "objectID": "install.html#installing-r-and-rstudio",
    "href": "install.html#installing-r-and-rstudio",
    "title": "Installation",
    "section": "",
    "text": "To work with the goFlux package, you’ll need to install R and RStudio. Both programs are free and easy to download. For an easy step by step, follow the procedure described here.",
    "crumbs": [
      "Installation"
    ]
  },
  {
    "objectID": "install.html#sec-installgoflux",
    "href": "install.html#sec-installgoflux",
    "title": "Installation",
    "section": "Installing goFlux from GitHub",
    "text": "Installing goFlux from GitHub\nTo install a package from GitHub, one can use the package devtools (or remotes) from the CRAN:\n\nif (!require(\"devtools\", quietly = TRUE)) install.packages(\"devtools\")\n\nThen, install the goFlux package from GitHub. If it is not the first time you install the package, it must first be detached before being updated.\n\ntry(detach(\"package:goFlux\", unload = TRUE), silent = TRUE)\ndevtools::install_github(\"Qepanna/goFlux\")\n\n\n\n\n\n\n\nImportant\n\n\n\nThe package is constantly being updated with new functions or de-bugging. To make sure that you are using the latest version, re-install the package every time you use it.\n\n\n\n\n\n\n\n\nWarning\n\n\n\nIf prompted, it is recommended to update any pre-installed packages. The functioning of the package depends on many other packages (AICcmodavg, data.table, dplyr, ggnewscale, ggplot2, ggstar, graphics, grDevices, grid, gridExtra, lubridate, minpack.lm, msm, pbapply, plyr, purrr, rjson, rlist, SimDesign, stats, stringr, tibble, tidyr, toOrdinal, utils), which will be installed when installing goFlux.\n\n\nOnce installed, load the package goFlux:\n\nlibrary(goFlux)",
    "crumbs": [
      "Installation"
    ]
  },
  {
    "objectID": "install.html#sec-packages",
    "href": "install.html#sec-packages",
    "title": "Installation",
    "section": "Other required packages",
    "text": "Other required packages\nOther packages from the CRAN are required to run the examples on this website.\n\n# Install packages\ninstall.packages(\"dplyr\")\ninstall.packages(\"purrr\")\ninstall.packages(\"readxl\")\ninstall.packages(\"openxlsx\")\n\n\n# Load packages\nlibrary(dplyr)\nlibrary(purrr)\nlibrary(readxl)\nlibrary(openxlsx)",
    "crumbs": [
      "Installation"
    ]
  },
  {
    "objectID": "goFlux.html",
    "href": "goFlux.html",
    "title": "Flux calculation",
    "section": "",
    "text": "The function goFlux calculates fluxes from a variety of greenhouse gases (CO2, CH4, N2O, NO2, NO, NH3, CO, and H2O) using both linear (LM) and non-linear (HM) (Hutchinson and Mosier 1981) flux calculation methods. The HM model for the chamber concentration \\(C_t\\) at time \\(t &gt; 0\\) after deployment is given by:\n\\[\\mathbf{Eqn~1}~~~~~~C_t = \\varphi~+~(C_0 - \\varphi)e^{-~\\kappa~t} \\tag{1}\\]\nWhere \\(\\varphi\\) is the assumed concentration of constant gas source below the surface (also known as \\(C_i\\)), \\(C_0\\) is the concentration in the chamber at the moment of chamber closure and \\(\\kappa\\) (kappa) determines the curvature of the model. A large kappa returns a strong curvature.\nA maximum threshold for this parameter, kappa-max (\\(k.max\\)), can be calculated from the linear flux estimate (\\(LM.flux\\)), the minimal detectable flux (\\(MDF\\)) and the time of chamber closure (\\(t\\)) (Hüppi, Felber, Krauss, Six, Leifeld, and Fuß 2018; christiansen2015?).\n\\[\\mathbf{Eqn~2}~~~~~~k.max = \\frac{LM.flux}{MDF~\\times~t} \\tag{2}\\]\nWhere \\(LM.flux\\) and \\(MDF\\) have the same units (nmol or µmol·m-2·s-1) and \\(t\\) is in seconds. Therefore, the units of kappa-max is s-1. This limit of kappa-max is included in the goFlux function, so that the non-linear flux estimate cannot exceed this maximum curvature. See here for more details about the minimal detectable flux (MDF).\nAll flux estimates, including the MDF, are multiplied by a \\(flux.term\\) which is used to correct for water vapor inside the chamber, as well as convert the units to obtain a term in nmol or µmol·m-2·s-1:\n\\[\\mathbf{Eqn~3}~~~~~~flux.term = \\frac{(1 - H_2O)~V~P}{A~R~T} \\tag{3}\\]\nWhere \\(H_2O\\) is the water vapor in mol·mol-1, \\(V\\) is the volume inside the chamber (+instrument and tubing) in liters, \\(P\\) is the pressure in kPa, \\(A\\) is the surface area inside the chamber in m2, \\(R\\) is the universal gas constant in L·kPa·K-1·mol-1, and \\(T\\) is the temperature inside the chamber in Kelvin. Each parameter is measured inside the chamber at \\(t = 0\\).",
    "crumbs": [
      "goFlux"
    ]
  },
  {
    "objectID": "goFlux.html#usage",
    "href": "goFlux.html#usage",
    "title": "Flux calculation",
    "section": "Usage",
    "text": "Usage\n\n\n\n\n\n\nNote\n\n\n\nCode chunks under Usage sections are not part of the demonstration. They are meant to show you how to use the arguments in the function.\n\n\n\ngoFlux(\n  dataframe,\n  gastype,\n  H2O_col = \"H2O_ppm\",\n  prec = NULL,\n  Area = NULL,\n  offset = NULL,\n  Vtot = NULL,\n  Vcham = NULL,\n  Pcham = NULL,\n  Tcham = NULL,\n  k.mult = 1,\n  warn.length = 60,\n  k.min = 10^-8\n)\n\n\nArguments\n\n\n\n\n\n\n\ndataframe\na data.frame containing gas measurements (see gastype below), water vapor measurements (see H2O_col below) and the following columns: UniqueID, Etime, Vtot, Area, Pcham, Tcham and flag (see the parameters Vtot, Area, Pcham and Tcham below for more details). chamID may be used instead of UniqueID.\n\n\ngastype\ncharacter string; specifies which column should be used for the flux calculations. Must be one of the following: “CO2dry_ppm”, “CH4dry_ppb”, “COdry_ppb”, “N2Odry_ppb”, “NH3dry_ppb”, “NO_ppb”, “NO2_ppb” or “H2O_ppm”.\n\n\nH2O_col\ncharacter string; specifies which column should be used to subtract the effect of water vapor in the chamber space. Default is H2O_col = \"H2O_ppm\".\n\n\nprec\nnumerical value; precision of the instruments. Units must be the same as gastype. With the default prec = NULL, instrument precision for each gas must be provided in dataframe.\n\n\nArea\nnumerical value; area of the soil surface inside the chamber (cm2). Alternatively, provide the column Area in dataframe if Area is different between samples.\n\n\noffset\n(optional) numerical value; height between the soil surface and the chamber (cm). Alternatively, provide the column offset in dataframe if offset is different between samples. offset is only used if Vtot is missing.\n\n\nVtot\nnumerical value; total volume inside the chamber, tubes, instruments, etc. (L). Alternatively, provide the column Vtot in dataframe if Vtot is different between samples. If Vtot is missing, the function will calculate it from Area, Vcham and offset.\n\n\nVcham\n(optional) numerical value; volume inside the chamber, tubes and instruments (L). Alternatively, provide the column Vcham in dataframe if Vcham is different between samples. Vhcam is only used if Vtot is missing.\n\n\nPcham\nnumerical value; pressure inside the chamber (kPa). Alternatively, provide the column Pcham in dataframe if Pcham is different between samples. If Pcham is not provided, normal atmospheric pressure (101.325 kPa) is used.\n\n\nTcham\nnumerical value; temperature inside the chamber (Celsius). Alternatively, provide the column Tcham in dataframe if Tcham is different between samples. If Tcham is not provided, 15°C is used as default.\n\n\nk.mult\nnumerical value; a multiplier for the allowed kappa-max. Default setting is no multiplier (k.mult = 1). k.mult cannot be negative and must be smaller or equal to 10.\n\n\nwarn.length\nnumerical value; limit under which a measurement is flagged for being too short (nb.obs &lt; warn.length).\n\n\nk.min\nnumerical value; a lower boundary value for kappa in the HM model. Default is k.min = 10^-8\n\n\n\n\n\nDetails\nFlux estimate units are µmol m-2s-1 (if initial concentration is ppm, e.g. CO2dry_ppm) and nmol m-2s-1 (if initial concentration is ppb, e.g. CH4dry_ppb).\nThe goFlux function calculates flux estimates from the linear model (LM) and the Hutchinson and Mosier model (HM). The HM model is a non-linear model, whose curvature is controlled by the parameter kappa. A large kappa returns a strong curvature. A maximum threshold for this parameter, kappa-max (k.max), can be calculated from the linear flux estimate (LM.flux), the minimal detectable flux (MDF) and the time of chamber closure. This limit of kappa-max is included in the goFlux function, so that the non-linear flux estimate cannot exceed this maximum curvature. Inversely, one can set a minimal threshold for kappa: to allow for a log-like curvature, set k.min below 0 (ex. -1), otherwise it should be just above 0 (ex. 10^-8). k.min cannot be 0 as this would result in a singular gradient.\nAll flux estimates, including the MDF, are multiplied by a flux.term which is used to correct for water vapor inside the chamber, as well as convert the units to obtain a term in nmol or µmol m-2s-1.\nThe argument Area is in (cm2), but the output units from the goFlux function are in (m2). This means that there is a factor of 10,000 to convert from (cm2) to (m2). This is important to take into account if one would provide something else than an Area in (cm2) to the function. For example, with incubated soil samples, one may provide an amount of soil (kg) instead of an Area. To get the right units in that case, multiply the kilograms of soil by 10,000 to remove the conversion from (cm2) to (m2).\nIn gastype, the gas species listed are the ones for which this package has been adapted. Please write to the maintainer of this package for adaptation of additional gases.\nwarn.length is the limit below which the chamber closure time is flagged for being too short (nb.obs &lt; warn.length). Portable greenhouse gas analyzers typically measure at a frequency of 1 Hz. Therefore, for the default setting of warn.length = 60, the chamber closure time should be approximately one minute (60 seconds). If the number of observations is smaller than the threshold, a warning is printed: e.g. “Low number of observations: UniqueID X has 59 observations”.\n\n\nValue\nThe function returns a data frame with 28 columns: a UniqueID per measurement, 11 columns for the linear model results (linear flux estimate (LM.flux), initial gas concentration (LM.C0), final gas concentration (LM.Ct), slope of linear regression (LM.slope), mean absolute error (LM.MAE), root mean square error (LM.RMSE), Akaike’s information criterion corrected for small sample size (LM.AICc), standard error (LM.SE), relative standard error (LM.se.rel), coefficient of determination (LM.r2), and p-value (LM.p.val)), 11 columns for the non-linear model results (non-linear flux estimate (HM.flux), initial gas concentration (HM.C0), the assumed concentration of constant gas source below the surface (HM.Ci), slope at t=0 (HM.slope), mean absolute error (HM.MAE), root mean square error (HM.RMSE), Akaike’s information criterion corrected for small sample size (HM.AICc), standard error (HM.SE), relative standard error (HM.se.rel), coefficient of determination (HM.r2), and curvature (kappa; HM.k), as well as the minimal detectable flux (MDF), the precision of the instrument (prec), the flux term (flux.term), kappa-max (k.max), the g factor (g.fact; g.factor), the number of observations used (nb.obs) and the true initial gas concentration (C0) and final gas concentration (Ct).\n\n\nExample\n\ndata(manID.UGGA)\nCO2_flux &lt;- goFlux(manID.UGGA, \"CO2dry_ppm\")\nCH4_flux &lt;- goFlux(manID.UGGA, \"CH4dry_ppb\")\n\n\n\n\n\n\n\nTipTip: Use the function on multiple files at a time\n\n\n\nTo load multiple RData files at once in your environment and store them all in one object, use the function map_df from the package purrr.\nUse the argument pattern to load only the files that match a pattern.\n\nmy.files &lt;- list.files(path = \"RData\", pattern = \"imp.RData\", full.names = TRUE) %&gt;%\n  map_df(~ get(load(.x)))\n\nCO2_flux &lt;- goFlux(my.files, \"CO2dry_ppm\")",
    "crumbs": [
      "goFlux"
    ]
  }
]